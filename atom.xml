<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Nemophila | blog of 一之濑亚子 いちのせあこ</title>
  
  
  <link href="https://nyaku.moe/atom.xml" rel="self"/>
  
  <link href="https://nyaku.moe/"/>
  <updated>2026-02-16T14:28:47.036Z</updated>
  <id>https://nyaku.moe/</id>
  
  <author>
    <name>izNyaku</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Nemophila 主题开发日志 log[1]</title>
    <link href="https://nyaku.moe/2026/02/16/Theme-Nemophila-dev-log1/"/>
    <id>https://nyaku.moe/2026/02/16/Theme-Nemophila-dev-log1/</id>
    <published>2026-02-16T10:41:18.000Z</published>
    <updated>2026-02-16T14:28:47.036Z</updated>
    
    <content type="html"><![CDATA[<h1 id="更新日志"><a class="markdownIt-Anchor" href="#更新日志"></a> 更新日志</h1><h2 id="搜索页-search"><a class="markdownIt-Anchor" href="#搜索页-search"></a> 搜索页 Search</h2><p>搜索页已完成，目前直接使用了js的 <code>indexOf</code> 函数实现搜索，支持用空格表示AND。<br /><img src="https://pic-oss.mouup.top/pic/2026/02/a4de92f2b898b99005975b460312f185.png" alt="page of searching" /></p><h2 id="tag"><a class="markdownIt-Anchor" href="#tag"></a> Tag</h2><p>已完成：在post卡片展示tag以及 <code>Tag页面</code></p><ul><li><p>Tag页面示例：<br /><img src="https://pic-oss.mouup.top/pic/2026/02/e08bbe0eba6a2064c5176ece169d8763.png" alt="Tag: Nemophila" /></p></li><li><p>文章卡片示例：<br /><img src="https://pic-oss.mouup.top/pic/2026/02/800ccb80cd8cbaceef63c8eefa3c7d25.png" alt="Post-card-example" /></p></li></ul><h2 id="优化字体加载"><a class="markdownIt-Anchor" href="#优化字体加载"></a> 优化字体加载</h2><p>Noto系列字体改用 Google fonts (Global) 和 <a href="http://font.im">font.im</a> (China Mainland) 以优化加载速度。</p>]]></content>
    
    
    <summary type="html">Nemophila主题截至v0.2.0已实现的功能</summary>
    
    
    
    <category term="tech" scheme="https://nyaku.moe/categories/tech/"/>
    
    
    <category term="Nemophila" scheme="https://nyaku.moe/tags/Nemophila/"/>
    
  </entry>
  
  <entry>
    <title>Nemophila 主题开发日志 log[0]</title>
    <link href="https://nyaku.moe/2026/02/09/Theme-Nemophila-dev-log0/"/>
    <id>https://nyaku.moe/2026/02/09/Theme-Nemophila-dev-log0/</id>
    <published>2026-02-09T13:20:11.000Z</published>
    <updated>2026-02-16T13:52:29.321Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h1><p>从21年开始玩博客到现在也五年多了，之前一直在使用 Mashiro 大佬的 <a href="https://2heng.xin/theme-sakura/">Sakura</a> 主题（由<a href="https://github.com/honjun/hexo-theme-sakura">honjun</a>移植到hexo后再被我魔改的版本（笑））。Sakura主题真的非常好看而且很可爱，我见到她的第一眼就喜欢上了。但是，当我几年后再点开当年乱改的样式和标签，我感觉我已经没有力气再去整理它们了（哭）。</p><p>于是，继承Sakura意志的全新的 Monica 主题被提上了日程。<br />25年暑假的时候，我沉迷于一本叫《Silent Witch》的小说，于是想着以可爱的女主莫妮卡为原型设计一个博客主题吧（干劲十足）！当我在Figma完成设计稿时，暑假已经接近结束了，因而项目被迫搁置。</p><p>到了26年的寒假，我继续这个项目时，非常现实的 —— 我更喜欢别的东西了=￣ω￣=。从年末开始我就沉迷于<a href="https://x.com/isekaijoucho">ヰ世界情緒</a>小姐无法自拔，而蓝情的代表花卉就是Nemophila，一种蓝色小花，也正因此我对主题进行了重新设计，最后有了现在的Nemophila主题。</p><ul><li>以下是 Monica 主题的部分原型图，希望以后有时间能把她做出来 (✿◠‿◠)</li></ul><div id="img-container4">    <img src="https://pic-oss.mouup.top/pic/2026/02/c899b1a88b59382134eb50cbbe122e6e.png" style="width:400px !important;margin:0;position:relative;" alt="home_Monica">    <img src="https://pic-oss.mouup.top/pic/2026/02/8751d072bc9af6290c7ef9bdb0c84260.png" style="width:400px !important;margin:0;position:relative;" alt="homeDark_Monica">    <img src="https://pic-oss.mouup.top/pic/2026/02/59b60d63ea3040c34cf681f363d6bc94.png" style="width:400px !important;margin:0;position:relative;" alt="articleList_Monica">    <img src="https://pic-oss.mouup.top/pic/2026/02/7649d20dd20d39e79bf9941c200daaf1.png" style="width:400px !important;margin:0;position:relative;" alt="articlePage_Monica"></div><style>    #img-container4 {        display:flex;        width: 844px;        flex-wrap:wrap;        justify-content: space-between;        row-gap:0px;        gap:24px;    }    #img-container4 .image-container {            left:0;            transform:none;        }</style><p>这个主题在很多地方都参考了 Sakura 主题，也融入了一点小巧思，但几乎所有代码都是从零开始实现的。在前前后后搞了一个月后，我终于得到了一个能满足基本需求的版本 <code>v0.1.0</code>, 目前代码已经开源，欢迎使用。</p><p><link-ing type="outside" link="https://github.com/imouup/hexo-theme-nemophila" title="hexo-theme-nemophila"></link-ing></p><br>接下来，本文将记录截至该版本已实现的page和功能。<h1 id="页面"><a class="markdownIt-Anchor" href="#页面"></a> 页面</h1><h2 id="主页-index"><a class="markdownIt-Anchor" href="#主页-index"></a> 主页 index</h2><p>在  <code>v0.1.0</code> 中，我暂时抛弃了主页大头图的设计，改用了纯色背景，在下一版本中将加入切换功能。</p><p><img src="https://pic-oss.mouup.top/pic/2026/02/0aa648a6187a50f1faf5d1c4291fc8e5.png" alt="index" /></p><h3 id="hi"><a class="markdownIt-Anchor" href="#hi"></a> Hi</h3><p>这里的 <em>Hi, xxx</em> 会随着hexo配置文件中的 <code>author</code> 字段变化。</p><p>在 <em>Hi, xxx</em> 的下方是通信方式，可以通过在主题配置文件配置<code>contact</code>字段进行设置。其中的icon字段支持图片链接或者font awesome。需要注意的是：若不使用默认的icon，建议全部采用font awesome以保证视觉上的整齐划一。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">contact:</span></span><br><span class="line">  <span class="attr">&#x27;Github&#x27;:</span> &#123;<span class="attr">uid:</span> <span class="string">&#x27;imouup&#x27;</span>,<span class="attr">path:</span> <span class="string">&#x27;https://github.com/imouup&#x27;</span> ,<span class="attr">icon:</span> <span class="string">&#x27;/ico/contact/github.svg&#x27;</span>&#125;</span><br><span class="line">  <span class="attr">&#x27;Twitter&#x27;:</span> &#123;<span class="attr">uid:</span> <span class="string">&#x27;@iznyaku&#x27;</span>,<span class="attr">path:</span> <span class="string">&#x27;https://x.com/iznyaku&#x27;</span> ,<span class="attr">icon:</span> <span class="string">&#x27;/ico/contact/twitter.svg&#x27;</span>&#125;</span><br><span class="line">  <span class="attr">&#x27;Bilibili&#x27;:</span> &#123;<span class="attr">uid:</span> <span class="string">&#x27;438518095&#x27;</span> ,<span class="attr">path:</span> <span class="string">&#x27;https://space.bilibili.com/438518095&#x27;</span> ,<span class="attr">icon:</span> <span class="string">&#x27;/ico/contact/bilibili.svg&#x27;</span>&#125;</span><br><span class="line">  <span class="attr">&#x27;Email&#x27;:</span> &#123;<span class="attr">uid:</span> <span class="string">&#x27;iznyaku@outlook.com&#x27;</span> ,<span class="attr">path:</span> <span class="string">&#x27;mailto:iznyaku@outlook.com&#x27;</span>, <span class="attr">icon:</span> <span class="string">far</span> <span class="string">fa-envelope</span>&#125;</span><br></pre></td></tr></table></figure><p>该主题的 <em>About me</em> 入口页从导航栏移动到了 <em>Hi, xxx</em> 的下方。</p><h3 id="tweet"><a class="markdownIt-Anchor" href="#tweet"></a> Tweet</h3><p>在 <em>Hi, xxx</em> 的右方是一个你可以随时更新的动态（类似QQ空间），暂且命名为 <em>Tweet</em> 。其中的用户名为hexo配置文件中的 <code>author_name_in_mother_tongue</code> 请务必配置。<br />要使用该功能，你首先需要为其配置后端：</p><ol><li>创建workers<br />将 <code>/api</code> 目录下的 <a href="https://github.com/imouup/hexo-theme-nemophila/blob/main/api/tweet_api_workers.js">tweet_api_workers.js</a> 部署到 <a href="https://workers.cloudflare.com/">cloudflare workers</a>。<br />选择<strong>从Hello Worls开始</strong>,进入后点击编辑代码删掉原本的代码并粘贴 tweet_api_workers.js 的内容。<br /><img src="https://pic-oss.mouup.top/pic/2026/02/6abfc15974b01d03983d61f074fec3c2.png" alt="创建Worker" /></li><li>配置Workers KV<br />在cloudflare的控制台进入 <code>存储和数据库</code> 下的 <code>Workers KV</code>。新建一个Instance，随意命名。<br />然后回到先前闯进的workers的页面，选择 <code>绑定</code> ，添加绑定一个<strong>KV命名空间</strong>，变量名称填写 <code>DB</code> ，KV命名空间选择先前创建的Workers KV.<br /><img src="https://pic-oss.mouup.top/pic/2026/02/fc4c72737942a41207e13574a8a6ce0d.png" alt="添加 KV 命名空间" /></li><li>绑定自定义域名<br />进入Worker的设置，绑定一个域名（workers.dev在已被GFW拦截）</li><li>设置Secret<br />进入Worker的设置，添加一个变量，名称为<code>API_SECRET</code></li></ol><p>得到后端的域名后回到主题配置文件，填入 <code>Tween</code> 字段下的 <code>api</code> 内。<br />当然，若不需要该功能，可在 <code>enable</code>处填 <code>false</code> 。</p><blockquote><h4 id="tweet-api-docs"><a class="markdownIt-Anchor" href="#tweet-api-docs"></a> Tweet API Docs</h4><ul><li><code>/tweet</code> 获取当前的动态</li><li><code>/update</code> 更新动态：文档类型 json, 接收字段：content (动态内容，纯文本)，always_on (是否置顶)</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">content = <span class="string">&quot;xxx&quot;</span><span class="punctuation">,</span> always_on = <span class="number">0</span> <span class="comment">// 普通动态，不置顶</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">content = <span class="string">&quot;xxx&quot;</span><span class="punctuation">,</span> always_on = <span class="number">1</span> <span class="comment">// 置顶动态，将忽略之后所有普通动态</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">content = <span class="string">&quot;&quot;</span><span class="punctuation">,</span> always_on = <span class="number">-1</span> <span class="comment">// 撤销当前置顶动态并显示最新的动态</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></blockquote><ul><li>为了方便使用，这里还提供了一个 <a href="https://www.icloud.com/shortcuts/afd26f3a69d74eb39bc58487ca76cce4">IOS的快捷方式</a></li></ul><h3 id="主页文章列表"><a class="markdownIt-Anchor" href="#主页文章列表"></a> 主页文章列表</h3><p>我参考了 Sakura 主题的文章列表，做了这种上浮出现，下滑加载的样式。<br />目前文章卡片上只有阅读次数和Category，之后还将加入Tag。</p><p>阅读次数获取调用了 <a href="https://github.com/EvanNotFound/vercount">Vercount</a> 的api （￣︶￣）↗　。</p><p><img src="https://pic-oss.mouup.top/pic/2026/02/e0cc67f0453e5eb8e83a58a440f26cc7.png" alt="Postlist" /></p><h2 id="文章页-post"><a class="markdownIt-Anchor" href="#文章页-post"></a> 文章页 post</h2><p>主要有 <em>有头图</em> 和 <em>无头图</em> 两种样式，可以通过在对应文章的md文件头部设置 <code>cover_showInPost</code> 的值( true / false )来为特定文章选择样式，默认为有头图。</p><p><img src="https://pic-oss.mouup.top/pic/2026/02/6304cc8c2406b5bbe35a2cf3d46e80e6.png" alt="文章页 post 无cover | cover_showInPost: false" /><br /><img src="https://pic-oss.mouup.top/pic/2026/02/14df5eb5eaf6e43b25ac88c4ad6f13c5.png" alt="文章页 post 有cover | cover_showInPost: true" /></p><p>目前，我已经重构了markdown的大部分常用样式：</p><h3 id="标题"><a class="markdownIt-Anchor" href="#标题"></a> 标题</h3><p><img src="https://pic-oss.mouup.top/pic/2026/02/c34159cb72aed20ad2f37cf165fe0b45.png" alt="标题" /></p><h3 id="代码块"><a class="markdownIt-Anchor" href="#代码块"></a> 代码块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">hello_world</span>()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;hello world!&#x27;</span>)</span><br><span class="line"></span><br><span class="line">hello_world()</span><br></pre></td></tr></table></figure><p>行内代码：<code>elements.forEach((ele)=&gt;&#123;return ele.name&#125;);</code></p><h3 id="列表"><a class="markdownIt-Anchor" href="#列表"></a> 列表：</h3><div style="margin-left:64px"><p>无序列表</p><ul><li>Kaguya</li><li>Yachiyo</li><li>iroha</li></ul><p>有序列表：</p><ol><li>ヰ</li><li>世界</li><li>情緒</li></ol></div><h3 id="表格"><a class="markdownIt-Anchor" href="#表格"></a> 表格</h3><table><thead><tr><th></th><th>markdown</th><th>HTML</th></tr></thead><tbody><tr><td>inline codeblock</td><td>`yachiyo()`</td><td><code>yachiyo()</code></td></tr><tr><td>bold</td><td>**“Isn’t this fun?”**</td><td><strong>Isn’t this fun?</strong></td></tr></tbody></table><h3 id="引言"><a class="markdownIt-Anchor" href="#引言"></a> 引言</h3><blockquote><p>希望我的歌声与画作，能成为引导你走向某处的契机。 我至今的「创作」，都是为了这个目的。<br />—— ヰ世界情緒</p></blockquote><h3 id="图片"><a class="markdownIt-Anchor" href="#图片"></a> 图片</h3><p>目前还没有图片加入放大查看功能，先加入 TODO List。</p><p><img src="https://pic-oss.mouup.top/pic/2026/02/9165ff99bbde1efbb23c993cfa9ec042.jpg" alt="超かぐや姫！ @oda_koden " /></p><h3 id="视频"><a class="markdownIt-Anchor" href="#视频"></a> 视频</h3><p>目前已对bilibili, youtube的嵌入链接以及video标签进行了简单适配，但需要注意：<br />b站的嵌入链接需要包裹 <code>&lt;div class=&quot;video-container&quot;&gt;&lt;/div&gt;</code>,例如：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;video-container&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;//player.bilibili.com/player.html?isOutside=true<span class="symbol">&amp;amp;</span>aid=115973126364952<span class="symbol">&amp;amp;</span>bvid=BV1HLz9BJEgi<span class="symbol">&amp;amp;</span>cid=35670851653<span class="symbol">&amp;amp;</span>p=1&quot;</span> <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">framespacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">allowfullscreen</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="video-container"><iframe src="//player.bilibili.com/player.html?isOutside=true&amp;aid=115973126364952&amp;bvid=BV1HLz9BJEgi&amp;cid=35670851653&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe></div><h3 id="katex"><a class="markdownIt-Anchor" href="#katex"></a> KaTex</h3><p>本主题支持 KaTex 公式渲染，不过前提是你需要安装 <a href="https://github.com/CHENXCHEN/hexo-renderer-markdown-it-plus">hexo-renderer-markdown-it-plus</a> 才能正确渲染公式。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm un hexo-renderer-marked --save</span><br><span class="line">npm i hexo-renderer-markdown-it-plus --save</span><br></pre></td></tr></table></figure><p>安装后使用 $ $ 包裹行内公式，$$ $$ 包裹独行公式（），示例：</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mo>=</mo><mi>h</mi><mi>μ</mi></mrow><annotation encoding="application/x-tex">E = h\mu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">h</span><span class="mord mathnormal">μ</span></span></span></span></p><p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mo>∮</mo><mi>l</mi></msub><mtext mathvariant="bold">H</mtext><mo>⋅</mo><mi>d</mi><mtext mathvariant="bold">l</mtext><mo>=</mo><mo>∑</mo><mi>I</mi></mrow><annotation encoding="application/x-tex">\oint_l \textbf H \cdot d\textbf l = \sum I </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.27195em;vertical-align:-0.9119499999999999em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011249999999999316em;">∮</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.425842em;"><span style="top:-1.7880500000000001em;margin-left:-0.44445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119499999999999em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord text"><span class="mord textbf">H</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span><span class="mord text"><span class="mord textbf">l</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.6000100000000002em;vertical-align:-0.55001em;"></span><span class="mop op-symbol large-op" style="position:relative;top:-0.000004999999999977245em;">∑</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span></span></span></span></span></p><h3 id="目录"><a class="markdownIt-Anchor" href="#目录"></a> 目录</h3><p>目录上的蓝色星星会跟随你目前所在的位置以及你鼠标的位置。</p><p><img src="https://pic-oss.mouup.top/pic/2026/02/ce279d007c995e746d9253efc3884960.png" alt="toc" /></p><h2 id="自定义页面-page"><a class="markdownIt-Anchor" href="#自定义页面-page"></a> 自定义页面 page</h2><p>这是所有无特定 layout 的自定义页面的模板，采取了与文章页相似的设计，目前还不能设置特定页面的头图。</p><p><img src="https://pic-oss.mouup.top/pic/2026/02/86bcf708747a3de9eeb83b5ff3d075a0.png" alt="自定义页面" /></p><h2 id="分类归档页-categoriescategory"><a class="markdownIt-Anchor" href="#分类归档页-categoriescategory"></a> 分类归档页 categories/&lt;category&gt;</h2><p><img src="https://pic-oss.mouup.top/pic/2026/02/a0464441704335c3a4cbc057b90ef4e1.png" alt="分类归档页 categories/tech" /></p><p>每个Category的归档页是在 page 模板的基础上开发的，但你可以为每个Category设置头图：只需编辑博客根目录下的 <code>source/_data/categoryCover.yml</code> 文件，若 <code>_data</code> 目录或 <code>categoryCover.yml</code> 文件不存在请自行创建，然后按以下格式填写：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- name: tech</span><br><span class="line">  cover: /images/article_banner/banner1.jpg</span><br><span class="line">- name: note</span><br><span class="line">  cover: /images/article_banner/banner1.jpg</span><br></pre></td></tr></table></figure><h2 id="友链页-friends"><a class="markdownIt-Anchor" href="#友链页-friends"></a> 友链页 friends</h2><p><img src="https://pic-oss.mouup.top/pic/2026/02/0420c152230b872cd5ab01a160a38f6e.png" alt="friends" /></p><p>欢迎交换友链描 ヾ(≧▽≦*)o</p><h2 id="音乐播放列表页-music"><a class="markdownIt-Anchor" href="#音乐播放列表页-music"></a> 音乐播放列表页 music</h2><p>我 <s>抄了</s> 借鉴了 Apple Music的设计，爆改了 Aplayer 的CSS。<a href="https://nyaku.moe/music/">大家可以来看一下</a>。<br />现在这个设计我总感觉与主题有点不合，在下一版本中将设计一个纯色背景的版本。</p><p><img src="https://pic-oss.mouup.top/pic/2026/02/a81286c30ea035a9074170824933ae76.png" alt="music" /></p><p>本主题支持 Aplayer 和 Metingjs，你可以通过编辑博客根目录下的 <code>source/music/index.md</code> 的头部来指定使用的播放器和播放列表.</p><h4 id="使用-aplayer-并自定义播放列表的示例"><a class="markdownIt-Anchor" href="#使用-aplayer-并自定义播放列表的示例"></a> 使用 Aplayer 并自定义播放列表的示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: music</span><br><span class="line">date: 2026-02-06 17:01:16</span><br><span class="line">cover: </span><br><span class="line">layout: music</span><br><span class="line">player_type: &quot;aplayer&quot;</span><br><span class="line">audio_list:</span><br><span class="line">    - name: &quot;Remember&quot;</span><br><span class="line">      artist: &quot;Yachiyo&quot;</span><br><span class="line">      url: &quot;https://music.163.com/song/media/outer/url?id=3340112781.mp3&quot;</span><br><span class="line">      cover: &quot;images/music_cover_test.jpg&quot;</span><br><span class="line">      lrc: &quot;assets/Remember.lrc&quot;</span><br><span class="line">    - name: &quot;Remember&quot;</span><br><span class="line">      artist: &quot;Yachiyo&quot;</span><br><span class="line">      url: &quot;https://music.163.com/song/media/outer/url?id=3340112781.mp3&quot;</span><br><span class="line">      cover: &quot;images/music_cover_test.jpg&quot;</span><br><span class="line">      lrc: &quot;assets/Remember.lrc&quot;  </span><br><span class="line">---</span><br></pre></td></tr></table></figure><h4 id="使用-metingjs-并使用网易云播放列表的示例"><a class="markdownIt-Anchor" href="#使用-metingjs-并使用网易云播放列表的示例"></a> 使用 Metingjs 并使用网易云播放列表的示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: music</span><br><span class="line">date: 2026-02-06 17:01:16</span><br><span class="line">cover: </span><br><span class="line">layout: music</span><br><span class="line">player_type: &quot;metingjs&quot;</span><br><span class="line">server: &quot;netease&quot;           </span><br><span class="line">meting_type: &quot;playlist&quot;     </span><br><span class="line">meting_id: &quot;4924556205&quot;  </span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="404页-nofound"><a class="markdownIt-Anchor" href="#404页-nofound"></a> 404页 nofound</h2><p>如果你点击导航栏的搜索键应该会进入本主题的404页面（搜索功能还在实现中🥲）</p><p><img src="https://pic-oss.mouup.top/pic/2026/02/05750eb9bb4077ec9876067f04c40470.png" alt="404 No Found" /></p><h1 id="功能"><a class="markdownIt-Anchor" href="#功能"></a> 功能</h1><h2 id="link-ing-标签"><a class="markdownIt-Anchor" href="#link-ing-标签"></a> &lt;link-ing&gt; 标签</h2><p>为了方便站内和站外链接，本主题定义了一个 <code>&lt;link-ing&gt;</code> 标签，具体语法如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link-ing</span> <span class="attr">type</span>=<span class="string">&quot;&quot;</span> <span class="attr">link</span>=<span class="string">&quot;&quot;</span> <span class="attr">title</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">link-ing</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>type: inside / outside 用于选择标签样式</li><li>link: 链接的url，若不以 http / https 开头，则为站内链接</li><li>title: 显示在卡片上的title</li></ul><h3 id="站内链接示例"><a class="markdownIt-Anchor" href="#站内链接示例"></a> 站内链接示例</h3><p><code>&lt;link-ing type=&quot;inside&quot; link=&quot;/about&quot; title=&quot;About me&quot;&gt;&lt;/link-ing&gt;</code></p><p>站内链接是行内元素，例如：<link-ing type="inside" link="/about" title="About me"></link-ing><br />当然其也可以独行放置：<br /><link-ing type="inside" link="/about" title="About me"></link-ing></p><h3 id="站外链接示例"><a class="markdownIt-Anchor" href="#站外链接示例"></a> 站外链接示例</h3><p><code>&lt;link-ing type=&quot;outnside&quot; link=&quot;https://2heng.xin/&quot; title=&quot;樱花庄的白猫&quot;&gt;&lt;/link-ing&gt;</code></p><p><link-ing type="outside" link="https://2heng.xin/" title="樱花庄的白猫"></link-ing></p><br><h2 id="aplayer-metingjs"><a class="markdownIt-Anchor" href="#aplayer-metingjs"></a> Aplayer &amp; Metingjs</h2><p>本主题对 Aplayer 的样式进行了调整以贴合主题的风格。由于Aplayer的css是固定在主题内的，故不支持升级版本。</p><ul><li>目前未适配mini模式</li><li>Aplayer version: v1.10.1</li><li>Metingjs version: v2.0.2</li></ul><h3 id="aplayer-测试"><a class="markdownIt-Anchor" href="#aplayer-测试"></a> Aplayer 测试</h3><div id="aplayertest"></div><script>  const ap = new APlayer({    container: document.getElementById('aplayertest'),    lrc:3,    audio: [{        name: 'Remember',        artist: 'Yachiyo',        url: 'https://music.163.com/song/media/outer/url?id=3340112781.mp3',        cover: window.origin + HEXO_SETTINGS.root + 'images/music_cover_test.jpg',        lrc: window.origin + HEXO_SETTINGS.root + 'assets/Remember.lrc'    },    {        name: 'Remember',        artist: 'Yachiyo',        url: 'https://music.163.com/song/media/outer/url?id=3340112781.mp3',        cover: window.origin + HEXO_SETTINGS.root + 'images/music_cover_test.jpg',        lrc: window.origin + HEXO_SETTINGS.root + 'assets/Remember.lrc'    }    ]});</script><h3 id="metingjs测试"><a class="markdownIt-Anchor" href="#metingjs测试"></a> Metingjs测试</h3><p><meting-js    server="netease"    type="playlist"    id="4924556205"    autoplay="false"><br /></meting-js></p><h2 id="waline"><a class="markdownIt-Anchor" href="#waline"></a> Waline</h2><p>请看下面的评论区吧。<br />本主题使用的是 Waline v3.8.0，由于CSS改动较大，请不要进行版本升级，目前使用的是主题内部的Waline样式表。<br />使用Waline请参考 <a href="https://waline.js.org/">Waline文档</a>，并在主题配置文件中进行设置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">waline:</span><br><span class="line">  enable: true</span><br><span class="line">  serverURL: &#x27;https://waline.cdn.mouup.top/&#x27;</span><br></pre></td></tr></table></figure><h2 id="icp-字段"><a class="markdownIt-Anchor" href="#icp-字段"></a> ICP 字段</h2><p>主题配置文件中的 <code>icp_license</code> 字段可设置ICP号</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">icp_license: </span><br><span class="line">  icp_license_link: &quot;https://icp.gov.moe/?keyword=20212022&quot;</span><br><span class="line">  text: &quot;萌ICP备20212022号&quot;</span><br></pre></td></tr></table></figure><h2 id="cc-license-字段"><a class="markdownIt-Anchor" href="#cc-license-字段"></a> CC License 字段</h2><p>可以在主题配置文件中选择是否为文章启用cc协议，并选择协议</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cclicense:</span><br><span class="line">  enable: true</span><br><span class="line">  type: &quot;知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议&quot;  # 说明文字，例如：知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</span><br><span class="line">  url: &quot;https://creativecommons.org/licenses/by-nc-sa/4.0/&quot;</span><br></pre></td></tr></table></figure><h2 id="rss-feed"><a class="markdownIt-Anchor" href="#rss-feed"></a> RSS feed</h2><p>在安装 <a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a> 插件后可以在主题配置文件中配置RSS feed</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># rss</span><br><span class="line">feed:</span><br><span class="line">  type: atom           </span><br><span class="line">  path: atom.xml       </span><br><span class="line">  limit: 0           </span><br><span class="line">  hub:                 </span><br><span class="line">  content: true        </span><br><span class="line">  content_limit: 140   </span><br><span class="line">  content_limit_delim: &#x27; &#x27; </span><br><span class="line">  order_by: -date      </span><br><span class="line">  icon: ico/Nemo.svg       </span><br><span class="line">  autodiscovery: true </span><br></pre></td></tr></table></figure><h1 id="最后"><a class="markdownIt-Anchor" href="#最后"></a> 最后</h1><h2 id="todo"><a class="markdownIt-Anchor" href="#todo"></a> TODO</h2><ul><li>搜索功能</li><li>page头图</li><li>Aplayer &amp; Metingjs 完整适配</li><li>访问速度改善：优化字体</li></ul><h2 id="博客配置文件中部分字段说明"><a class="markdownIt-Anchor" href="#博客配置文件中部分字段说明"></a> 博客配置文件中部分字段说明</h2><h3 id="back_to_top-图片"><a class="markdownIt-Anchor" href="#back_to_top-图片"></a> back_to_top 图片</h3><p>现在右下角的图片，点击回到顶部</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">back_to_top_img: images/yachiyo.PNG </span><br></pre></td></tr></table></figure><h3 id="lazyload-图片懒加载"><a class="markdownIt-Anchor" href="#lazyload-图片懒加载"></a> lazyload 图片懒加载</h3><p>为全站图片设置懒加载动画或图片：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lazyload:</span><br><span class="line">  enable: true</span><br><span class="line">  loading_img: /images/yachiyo_loading2_640.webp</span><br></pre></td></tr></table></figure><p>例如：<br /><img src="/images/yachiyo_loading_640.webp" alt="lazyload1" /><br /><img src="/images/yachiyo_loading2_640.webp" alt="lazyload2" /></p><h2 id="最后的最后"><a class="markdownIt-Anchor" href="#最后的最后"></a> 最后的最后</h2><p>目前已经完成的内容大概就是这么多了，虽然还有不少工作要做，但基本的骨架已经搭好了。<br />在写这篇文章的过程中我也发现了许多bug 😄，欢迎大家一起来找bug。<br />这是本人第一次写这么多CSS，很多地方可能不太规范，恳请大家一起来完善 q(≧▽≦q)。</p>]]></content>
    
    
    <summary type="html">Nemophila主题截至v0.1.0已实现的功能</summary>
    
    
    
    <category term="tech" scheme="https://nyaku.moe/categories/tech/"/>
    
    
    <category term="Nemophila" scheme="https://nyaku.moe/tags/Nemophila/"/>
    
  </entry>
  
  <entry>
    <title>RVC模型训练</title>
    <link href="https://nyaku.moe/2025/04/04/RVC%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83/"/>
    <id>https://nyaku.moe/2025/04/04/RVC%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83/</id>
    <published>2025-04-04T07:10:20.000Z</published>
    <updated>2026-02-09T07:02:07.813Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h1><p>最近想自己训练个模型在和别人语音的时候用，于是了解到了RVC这个项目</p><hr /><p>Retrieval-based-Voice-Conversion-WebUI<br /><a href="https://github.com/RVC-Project/Retrieval-based-Voice-Conversion-WebUI">https://github.com/RVC-Project/Retrieval-based-Voice-Conversion-WebUI</a></p><hr /><p>它可以实现<strong>人声模型的训练和实时推理</strong></p><h1 id="数据集准备"><a class="markdownIt-Anchor" href="#数据集准备"></a> 数据集准备</h1><blockquote><p>Q10:需要多少训练集时长</p><ul><li><p><strong>推荐10min至50min</strong></p></li><li><p>保证音质高底噪低的情况下，如果有个人特色的音色统一，则多多益善</p></li><li><p>高水平的训练集（精简+音色有特色），5min至10min也是ok的，仓库作者本人就经常这么玩</p></li><li><p>也有人拿1min至2min的数据来训练并且训练成功的，但是成功经验是其他人不可复现的，不太具备参考价值。这要求训练集音色特色非常明显（比如说高频气声较明显的萝莉少女音），且音质高；</p></li><li><p>1min以下时长数据目前没见有人尝试（成功）过。不建议进行这种鬼畜行为。</p></li></ul></blockquote><p>根据官方说法，我们大概需要准备<strong>15分钟左右</strong>的干声</p><p>我训练的是普拉娜的模型，音频数据主要来自游戏解包还有阿罗普拉频道，关于游戏解包数据我推荐使用这个项目：</p><hr /><p>Blue Archive Asset Downloader<br /><a href="https://github.com/ZM-Kimu/Blue-Archive-Asset-Downloader">https://github.com/ZM-Kimu/Blue-Archive-Asset-Downloader</a></p><hr /><p>游戏解包音频可以直接用，视频提取的音轨还要做处理</p><hr /><h2 id="一般音频处理"><a class="markdownIt-Anchor" href="#一般音频处理"></a> 一般音频处理</h2><p>首先打开webui，在RVC的根目录下打开go-web.bat</p><p><img src="https://pic-oss.mouup.top/pic/2025/04/5975633cc0918c3174dfa7ce94adbd89.png" alt="goweb" /></p><p>转到<code>伴奏人声分离&amp;去混响&amp;去回声</code>选项卡</p><p><img src="https://pic-oss.mouup.top/pic/2025/04/2859c69b6ff1ecbff60957fbd965ab71.png" alt="伴奏人声分离&amp;去混响&amp;去回声" /></p><p>把要处理的文件放在一个文件夹内，并在<code>输入待处理音频文件夹路径</code>里输入目录的路径，导出格式建议选wav，因为之后训练要用wav格式的文件<br />模型的选取可以参考作者的说明，我的建议是</p><ul><li>如果只是单纯的一般交谈声和bgm分离，用HP2或HP3比较适合</li><li>如果是歌曲分离干声和伴奏可以考虑先用MDX-Net去混响再用DeEcho去延迟</li></ul><p>转换后的文件默认再RVC目录下的<code>opt</code>目录内<br />将所有的训练音频整合到同一个文件夹内</p><hr /><h1 id="模型训练"><a class="markdownIt-Anchor" href="#模型训练"></a> 模型训练</h1><h2 id="step-12"><a class="markdownIt-Anchor" href="#step-12"></a> Step 1&amp;2</h2><h3 id="首先是基本的设置"><a class="markdownIt-Anchor" href="#首先是基本的设置"></a> 首先是基本的设置</h3><p><img src="https://pic-oss.mouup.top/pic/2025/04/491e38f855b5bdae1ae0a4b1807376ac.png" alt="step1&amp;2" /></p><ul><li>实验名：模型的名称</li><li>目标采样率：与训练的音频相同</li><li>版本选v2</li><li>训练文件夹路径：填入刚才存放训练音频的文件夹路径</li></ul><p>其余全部默认即可</p><h2 id="step-3"><a class="markdownIt-Anchor" href="#step-3"></a> Step 3</h2><p><img src="https://pic-oss.mouup.top/pic/2025/04/40eedb21265dcc3c951ce5897cfe74ed.png" alt="step3" /></p><h3 id="训练设置部分"><a class="markdownIt-Anchor" href="#训练设置部分"></a> 训练设置部分：</h3><p>一般保持默认即可<br />epoch在20附近比较合适</p><h3 id="一键训练"><a class="markdownIt-Anchor" href="#一键训练"></a> 一键训练</h3><ul><li>点击一键训练可以直接一次跑完step 1 &amp; 2 &amp; 3，等待输出以下内容即可</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">step3a:正在训练模型</span><br><span class="line">训练结束, 您可查看控制台训练日志或实验文件夹下的train.log</span><br><span class="line">(46248, 768),1185</span><br><span class="line">(46248, 768),1185</span><br><span class="line">training</span><br><span class="line">(46248, 768),1185</span><br><span class="line">training</span><br><span class="line">adding</span><br><span class="line">(46248, 768),1185</span><br><span class="line">training</span><br><span class="line">adding</span><br><span class="line">成功构建索引，added_IVF1185_Flat_nprobe_1_mi-test_v2.index</span><br><span class="line">全流程结束！</span><br></pre></td></tr></table></figure><ul><li>如果不使用一键训练，依此进行<code>处理数据</code> → <code>特征提取</code> → <code>训练模型</code> → <code>训练特征提取</code> <strong>是一样的</strong></li></ul><p>更多问题可以参考官方wiki中的的<a href="https://github.com/RVC-Project/Retrieval-based-Voice-Conversion-WebUI/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E7%AD%94">常见问题解答</a></p><h2 id="训练完成后的文件"><a class="markdownIt-Anchor" href="#训练完成后的文件"></a> 训练完成后的文件</h2><ul><li><p>训练完成后，在<code>/assets/weights</code>目录下将会生成与实验名称同名的pth文件<br /><img src="https://pic-oss.mouup.top/pic/2025/04/8db649ae094e87293234f948ffebe1d2.png" alt="plana.pth" /></p></li><li><p>在<code>logs/&lt;实验名称&gt;</code>会生成一个<code>added</code>开头的<code>index</code>文件，这是模型的索引</p></li></ul><p><strong>⚠️注意，<code>logs/&lt;实验名称&gt;</code>下的pth文件并不适用于推理！！！</strong></p><hr /><h1 id="模型使用"><a class="markdownIt-Anchor" href="#模型使用"></a> 模型使用</h1><h2 id="1webui"><a class="markdownIt-Anchor" href="#1webui"></a> 1.WebUI</h2><p>在<code>模型推理</code>选项卡中刷新音色就可以看到刚刚训练好的模型，选择音色</p><ul><li>在<code>自动检测index路径,下拉式选择(dropdown)</code>中选择刚才的index文件</li><li><code>输入待处理音频文件路径</code>中输入希望进行变声的音频文件<br />✨ 这里的输入音频必须是干声，否则结果将会极其鬼畜！！！</li><li>调整参数，然后点击转换即可</li></ul><p><img src="https://pic-oss.mouup.top/pic/2025/04/33dd78d492342d2dc5d8f13aecd4a7ff.png" alt="reasoning" /></p><h2 id="生成实例"><a class="markdownIt-Anchor" href="#生成实例"></a> 生成实例</h2><h3 id="翻唱"><a class="markdownIt-Anchor" href="#翻唱"></a> 翻唱</h3><blockquote><p>Feel my soul<br />寺泽百花</p></blockquote><ul><li>合成：</li></ul><div id="aplayer01"></div><script type="text/javascript">    const ap1 = new APlayer({    container: document.getElementById('aplayer01'),    audio: [{        name: 'feel my soul (feat.plana)',        artist: '普拉娜',        url: 'https://video-oss.mouup.top/feelmysoul(feat_plana).mp3',        cover: 'https://pic-oss.mouup.top/pic/2025/04/d8b6d827e92ddcd15ab78a31f58f0143.png'    }]});</script><ul><li>干声：</li></ul><div id="aplayer02"></div><script type="text/javascript">    const ap2 = new APlayer({    container: document.getElementById('aplayer02'),    audio: [{        name: 'feel my soul (feat.plana, pure)',        artist: '普拉娜',        url: 'https://video-oss.mouup.top/tmpmp0o0pqt.mp3',        cover: 'https://pic-oss.mouup.top/pic/2025/04/d8b6d827e92ddcd15ab78a31f58f0143.png'    }]});</script><hr /><h3 id="交谈"><a class="markdownIt-Anchor" href="#交谈"></a> 交谈</h3><div id="aplayer03"></div><script type="text/javascript">    const ap3 = new APlayer({    container: document.getElementById('aplayer03'),    audio: [{        name: '唱跳rap篮球music',        artist: '普拉娜',        url: 'https://video-oss.mouup.top/cxkplana.mp3'    }]});</script><hr /><h2 id="2实时语音转换"><a class="markdownIt-Anchor" href="#2实时语音转换"></a> 2.实时语音转换</h2><p>使用RVC目录下的<code>go-realtime-gui.bat</code>即可打开实时语音转换</p><h3 id="安装虚拟声卡"><a class="markdownIt-Anchor" href="#安装虚拟声卡"></a> 安装虚拟声卡</h3><p>首先我们需要安装虚拟声卡，我用的是voicemeeter</p><hr /><p>Voicemeeter<br /><a href="https://voicemeeter.com">https://voicemeeter.com</a></p><hr /><p><img src="https://pic-oss.mouup.top/pic/2025/04/82a7ce467693b138e0b2adbddcd4661c.png" alt="voicemeeter" /></p><p>打开后：</p><ul><li>stereo input 1 &amp; 2 表示第一、二个物理输入设备</li><li>VIRTUALINPUT 表示虚拟输入，go-realtime-gui就要在这里输入虚拟声卡<ul><li>这里的A和B分别表示输出到<strong>物理输出设备</strong>和<strong>虚拟输出设备</strong>，点亮就是开启这条输出通道</li><li>换句话说，打开A就会输出到耳机和音响，打开B就会输出到系统内的软件</li></ul></li><li>最后HARDWARE OUT可以设置要输出声音的物理输出设备（例如音响和耳机）</li></ul><h3 id="在go-realtime-gui内"><a class="markdownIt-Anchor" href="#在go-realtime-gui内"></a> 在go-realtime-gui内</h3><p><img src="https://pic-oss.mouup.top/pic/2025/04/6c5530e9d8d98ad87e72726e76e80315.png" alt="go-realtime-gui" /></p><ul><li>输入设备设置为你的麦克风</li><li>输出设备（输入声卡）直接选<code>Voicemeeter Input(VB-Audio Voi MME)</code>即可打开实时语音转换</li></ul><p>其他设置部分：</p><ul><li>音调如果是男声变女生尽量拉高，反之拉低</li><li>建议打开降噪</li></ul><p>点击开始音频转换即可看到Voicemeeter里面虚拟通道有输入了</p><h3 id="如何在软件内使用"><a class="markdownIt-Anchor" href="#如何在软件内使用"></a> 如何在软件内使用</h3><p>这里以Pr为例，在音频硬件首选项中选择输入音频设备为<code>Voicemeeter Out Bn</code><br />n为正整数</p><p><strong>⚠️ 不要选择带A的，那些是物理输出</strong></p><p><img src="https://pic-oss.mouup.top/pic/2025/04/4d155b70437c472070424a02b630744c.png" alt="pr" /></p><hr /><p>至此就全部完成啦 ヾ(≧▽≦*)o</p><p><img src="https://pic-oss.mouup.top/pic/2025/04/c9f23fcbc4329ac70f5f4c9a72e98469.jpg" alt="cover" /></p><blockquote><p>封面：sensei👀<br />pid: <a href="https://www.pixiv.net/artworks/115447576">115447576</a><br />artist: <a href="https://www.pixiv.net/users/31909437">monthmio</a></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#前言&quot;&gt;&lt;/a&gt; 前言&lt;/h1&gt;
&lt;p&gt;最近想自己训练个模型在和别人语音的时候用，于是了解到了RVC这个项目&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Retrieval-based-Voice-C</summary>
      
    
    
    
    <category term="tech" scheme="https://nyaku.moe/categories/tech/"/>
    
    
    <category term="技术,RVC,AI" scheme="https://nyaku.moe/tags/%E6%8A%80%E6%9C%AF-RVC-AI/"/>
    
  </entry>
  
  <entry>
    <title>Python脚本打包笔记</title>
    <link href="https://nyaku.moe/2025/01/21/Python%E8%84%9A%E6%9C%AC%E6%89%93%E5%8C%85%E7%AC%94%E8%AE%B0/"/>
    <id>https://nyaku.moe/2025/01/21/Python%E8%84%9A%E6%9C%AC%E6%89%93%E5%8C%85%E7%AC%94%E8%AE%B0/</id>
    <published>2025-01-21T09:15:45.000Z</published>
    <updated>2026-02-09T07:02:04.965Z</updated>
    
    <content type="html"><![CDATA[<h1 id="写在前面"><a class="markdownIt-Anchor" href="#写在前面"></a> 写在前面</h1><p>最近写了一个python爬虫的脚本，想打包放上Github的Release，又不想用pyinstaller<br />偶然间发现了Pystand这个项目，打算尝试一下</p><h2 id="项目地址"><a class="markdownIt-Anchor" href="#项目地址"></a> 项目地址</h2><hr /><p>skywind3000/PyStand - Github<br /><a href="https://github.com/skywind3000/PyStand">https://github.com/skywind3000/PyStand</a></p><hr /><br><h1 id="开始打包"><a class="markdownIt-Anchor" href="#开始打包"></a> 开始打包</h1><h2 id="准备工作"><a class="markdownIt-Anchor" href="#准备工作"></a> 准备工作</h2><h3 id="1首先准备好要打包的项目"><a class="markdownIt-Anchor" href="#1首先准备好要打包的项目"></a> 1.首先准备好要打包的项目</h3><p><img src="https://pic-oss.mouup.top/pic/2025/01/3e03ad45232cde5d90c6674f169bf1f9.png" alt="the mftools troject" /></p><blockquote><p>这是我给Mfuns写的一个<a href="https://github.com/imouup/Mfuns_tools">小工具</a>，可以把网盘外链转成直链</p></blockquote><h3 id="2-下载嵌入式python包"><a class="markdownIt-Anchor" href="#2-下载嵌入式python包"></a> 2. 下载嵌入式Python包</h3><hr /><p>Python 3.8.10<br /><a href="https://www.python.org/downloads/release/python-3810/">https://www.python.org/downloads/release/python-3810/</a></p><hr /><br><p><img src="https://pic-oss.mouup.top/pic/2025/01/97a3ae2f55694f2cfabb60122dd7c994.png" alt="py3.8.10embeddable" /></p><p>这里选择Python3.8.10 的32位版本嵌入包，因为Python3.8.10 是最后一个支持Win7的版本，使用32位可以使得包更紧凑</p><p>下载完以后解压缩，在前面准备好的项目文件夹下新建<code>runtime</code>目录，把解压得到的文件放到里面去</p><br><h2 id="编译pystand项目"><a class="markdownIt-Anchor" href="#编译pystand项目"></a> 编译PyStand项目</h2><p>PyStand的Release页只提供了GUI版本，但我这是一个命令行脚本，因此必须手动编译</p><p>同时我也想更换一下图标</p><blockquote><p>以下内容参考了这位大佬的文章</p><p><a href="https://gist.github.com/myd7349/9f7c6334e67d1aee68a722a15df4a62a">How-to-use-PyStand</a></p></blockquote><h3 id="下载cmake-安装c编译器"><a class="markdownIt-Anchor" href="#下载cmake-安装c编译器"></a> 下载cmake &amp; 安装C++编译器</h3><h4 id="cmake"><a class="markdownIt-Anchor" href="#cmake"></a> Cmake</h4><hr /><p>Cmake downloads<br /><a href="https://cmake.org/download/">https://cmake.org/download/</a></p><hr /><p>我选择直接下载便携版（zip后缀），然后把里面的bin目录添加到PATH</p><h4 id="c编译器"><a class="markdownIt-Anchor" href="#c编译器"></a> C++编译器</h4><p>因为还不太懂C++，选择直接安装Visual Studio的C++环境 =￣ω￣=</p><hr /><h3 id="编译"><a class="markdownIt-Anchor" href="#编译"></a> 编译!</h3><p>首先Clone PyStand的仓库 <code>git clone https://github.com/skywind3000/PyStand</code></p><blockquote><p>换图标：只要替换根目录下的<code>appicon.ico</code>文件即可</p></blockquote><br><p>新建一个文件夹build文件夹存放编译过程中的文件 <code>mkdir build &amp;&amp; cd build</code></p><p>开始Configure</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cmake -S .. -B . -DPYSTAND_CONSOLE=ON -A Win32</span><br><span class="line"># -DPYSTAND_CONSOLE=ON指定了生成的是一个控制台项目，如果你要生成GUI项目删去它或者改成OFF即可</span><br><span class="line"># -A Win32指定生成的是32位应用</span><br></pre></td></tr></table></figure><p>编译</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cmake --build . --config Release</span><br><span class="line"># --config Release指定编译的版本的Release版本而不是Debug版本</span><br></pre></td></tr></table></figure><p>然后应该能在Release文件夹下找到<code>PyStand.exe</code>文件，把它复制到最开始准备好的项目文件夹中</p><br><h2 id="准备第三方库"><a class="markdownIt-Anchor" href="#准备第三方库"></a> 准备第三方库</h2><p>准备第三方库有两种方法:</p><ul><li>第一种是利用另一个同版本纯净Python的虚拟环境</li><li>第二种是直接在Python embeddable版本中安装pip来安装，第二种方法可以看看<a href="https://gist.github.com/myd7349/9f7c6334e67d1aee68a722a15df4a62a#user-content-%E4%B8%80%E4%B8%AA%E5%A4%8D%E6%9D%82%E7%9A%84%E4%BE%8B%E5%AD%90vitables">大佬的文章</a></li></ul><p>我用的是第一种方法</p><h3 id="先在沙盒中安装与嵌入版同版本的python"><a class="markdownIt-Anchor" href="#先在沙盒中安装与嵌入版同版本的python"></a> 先在沙盒中安装与嵌入版同版本的Python</h3><p><img src="https://pic-oss.mouup.top/pic/2025/01/2c36a7d2726a18ecf13b0635e271864d.png" alt="install py3.8.10 in winsandbox" /></p><h3 id="创建虚拟环境"><a class="markdownIt-Anchor" href="#创建虚拟环境"></a> 创建虚拟环境</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\WDAGUtilityAccount&gt;python -m venv test</span><br></pre></td></tr></table></figure><h3 id="在虚拟环境中安装依赖"><a class="markdownIt-Anchor" href="#在虚拟环境中安装依赖"></a> 在虚拟环境中安装依赖</h3><p>首先在PyCharm到处requirements.txt文件</p><p>在<code>工具</code>中选择<code>同步Python要求</code>(sync python requirements)<br /><img src="https://pic-oss.mouup.top/pic/2025/01/73731b002a55bd2c2348db1bdbe8ce37.png" alt="sync python requirements" /></p><p>导出requirements.txt文件<br /><img src="https://pic-oss.mouup.top/pic/2025/01/b47471a9c6d08dccfe5be1bc6e10f435.png" alt="export requirements.txt" /></p><p>这会在项目根目录下生成requirements.txt文件，把它拷贝到刚才创建的虚拟环境test的目录所在的目录中</p><p>安装依赖</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 先激活虚拟环境</span><br><span class="line">C:\Users\WDAGUtilityAccount&gt;test\Scripts\activate</span><br><span class="line"># 安装依赖</span><br><span class="line">(test) C:\Users\WDAGUtilityAccount&gt;pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p>安装完成后，把<code>test\Lib\site-packages</code>目录下没用的依赖删掉，然后把整个<code>site-packages</code>文件夹复制到最开始准备好项目文件夹下</p><h2 id="小修小补"><a class="markdownIt-Anchor" href="#小修小补"></a> 小修小补</h2><h3 id="修改python文件"><a class="markdownIt-Anchor" href="#修改python文件"></a> 修改Python文件</h3><p>为了确保各个python文件都能顺利加载，我修改了Mftools.py文件，加入了以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sys.path.append(r&#x27;.\src&#x27;)</span><br><span class="line">sys.path.append(r&#x27;.\site-packages&#x27;)</span><br><span class="line">sys.path.append(r&#x27;.\plugins\pan_transfer&#x27;)</span><br></pre></td></tr></table></figure><p>同时在pan_transfer.py文件中也加入了，因为不加入就会报错</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sys.path.append(r&#x27;.\src&#x27;)</span><br><span class="line">sys.path.append(r&#x27;.\site-packages&#x27;)</span><br><span class="line">sys.path.append(r&#x27;.\plugins\pan_transfer&#x27;)</span><br></pre></td></tr></table></figure><p>其实我还不太清楚为什么用了<code>subprocess</code>后原本的模块搜索目录列表会无法生效，之后可以试试<code>import</code></p><h3 id="修改文件名"><a class="markdownIt-Anchor" href="#修改文件名"></a> 修改文件名</h3><p>这是项目作者的说明：</p><blockquote><p>PyStand.exe的功能是：</p><ul><li>自动加载 PyStand.exe 同级目录下面 runtime 子目录内的 Embedded Python</li><li>自动启动 PyStand.exe 同级目录下面的 PyStand.int 程序（Python 代码）</li><li>如果改名，会加载对应名称的 .int 文件，比如改为 MyDemo.exe 就会加载 MyDemo.int</li><li>会自动添加 PyStand.exe 同级目录下的 site-packages 目录，库可以放到里面</li></ul></blockquote><br><p>我这个项目是通过根目录的<code>Mftools.py</code>用<code>subprocess</code>运行子目录下的py文件实现的</p><p>因此我需要把根目录下的<code>Mftools.py</code>更名为<code>Mftools.int</code>，同时将<code>PyStand.exe</code>更名为<code>Mftools.exe</code></p><p>最后的目录结构如下：<br /><img src="https://pic-oss.mouup.top/pic/2025/01/31e718eff2b43b45d0cbb9755d8c0cb5.png" alt="dir structure" /></p><p>到这里就打包完成了，可以在命令行里打开<code>Mftools.exe</code>看看有没有有没问题</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;写在前面&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#写在前面&quot;&gt;&lt;/a&gt; 写在前面&lt;/h1&gt;
&lt;p&gt;最近写了一个python爬虫的脚本，想打包放上Github的Release，又不想用pyinstaller&lt;br /&gt;
偶然间发现了</summary>
      
    
    
    
    <category term="tech" scheme="https://nyaku.moe/categories/tech/"/>
    
    
    <category term="PyStand,Python,打包" scheme="https://nyaku.moe/tags/PyStand-Python-%E6%89%93%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>折腾使用Caddy反向代理jsdelivr</title>
    <link href="https://nyaku.moe/2024/07/29/%E6%8A%98%E8%85%BE%E4%BD%BF%E7%94%A8Caddy%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86jsdelivr/"/>
    <id>https://nyaku.moe/2024/07/29/%E6%8A%98%E8%85%BE%E4%BD%BF%E7%94%A8Caddy%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86jsdelivr/</id>
    <published>2024-07-29T01:06:34.000Z</published>
    <updated>2026-02-09T12:15:36.104Z</updated>
    
    <content type="html"><![CDATA[<h2 id="缘起"><a class="markdownIt-Anchor" href="#缘起"></a> 缘起</h2><p>最近我把服务器的web server从nginx换到了Caddy2，（因为Caddy2真的太tm人性化了），但随之而来，我发现caddy反代的的语法和nginx差别似乎并不小，折腾了好久才搞好了图床的反代，故书此文以记之。</p><h2 id="开始"><a class="markdownIt-Anchor" href="#开始"></a> 开始</h2><p>⚠️注意：本文中所写的Caddy均指Caddy V2，V1与V2的语法存在较大差别，请留意！</p><h3 id="准备工作"><a class="markdownIt-Anchor" href="#准备工作"></a> 准备工作</h3><p>还是常规的任务，将域名解析到服务器</p><h3 id="caddy配置文件书写"><a class="markdownIt-Anchor" href="#caddy配置文件书写"></a> Caddy配置文件书写</h3><h4 id="1"><a class="markdownIt-Anchor" href="#1"></a> 1</h4><p>打开Caddy配置文件目录，我的在/etc/caddy下，你可以直接编辑Caddyfile，也可以创建另一个文件将其引入到Caddyfile,我选择在sites文件夹下新建cdn.conf并将其引入<br />首先编辑Caddyfile，加入引用句段</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import /etc/caddy/sites/*.conf</span><br></pre></td></tr></table></figure><p>然后新建或打开sites文件夹<br /><img src="https://pic-oss.mouup.top/pic/2024/07/3d235f15a564391f98ad5b6d075fbef3.png" alt="/etc/caddy" /><br />新建cdn.conf文件</p><h4 id="2编辑文件内容"><a class="markdownIt-Anchor" href="#2编辑文件内容"></a> 2.编辑文件内容</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim cdn.conf</span><br></pre></td></tr></table></figure><p>首先设定域名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cdn.xxxxx.moe:443&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>设置自动更新ssl证书</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cdn.xxxxx.moe:443 &#123;</span><br><span class="line">tls 233333@gmail.com  #这里填你自己的邮箱</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr/><p>我希望当别人直接访问<code>cdn.xxxxx.moe</code>时跳转到一个说明页面<code>nyacdn.moe</code>，而访问<code>cdn.xxxxx.moe/pico/</code>时则执行图床的反代。我需要使用<a href="https://caddy2.dengxiaolong.com/docs/caddyfile/directives/handle">handle</a>语法，它类似nginx中的<code>location</code>指令。</p><p>因而语法结构如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cdn.xxxxx.moe:443 &#123;</span><br><span class="line">tls 233333@gmail.com</span><br><span class="line">handle / &#123;</span><br><span class="line">redir https://nyacdn.moe permanent</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">handle /pico/* &#123;</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr/>接下来是反向代理的部分由于语法不同，Caddy中不能像nginx一样直接用```proxy_pass```反代路径<blockquote><p>上游地址不能包含路径或查询字符串，因为这将意味着在代理时同时重写请求，这种行为没有被定义或支持<a href="#footnote1">[1]</a></p></blockquote><p>我本来想用<a href="https://caddy2.dengxiaolong.com/docs/caddyfile/directives/rewrite">rewrite</a>的，但是折腾了很久之后我发现它并不适用，最后我发现了caddy还有<a href="https://caddy2.dengxiaolong.com/docs/caddyfile/directives/uri">uri</a>这个语法，完美地实现了我的需要。</p><p>首先让<code>cdn.xxxxx.moe/pico/</code>反代<code>https://cdn.jsdelivr.net</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">handle /pico/* &#123;</span><br><span class="line">reverse_proxy https://cdn.jsdelivr.net</span><br><span class="line">           header_up Host &#123;upstream_hostport&#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>记得一定要加上<code>header_up Host &#123;upstream_hostport&#125;</code>否则jsdelivr会拦截</p><p>然后用<code>uri</code>改写url</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">handle /pico/* &#123;</span><br><span class="line">uri replace /pico/ /gh/xxxxx/pico/</span><br><span class="line">reverse_proxy https://cdn.jsdelivr.net &#123;</span><br><span class="line">header_up Host &#123;upstream_hostport&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>最后的配置文件长这样</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cdn.xxxxxx.moe:443 &#123;</span><br><span class="line">tls 233333@gmail.com</span><br><span class="line">handle / &#123;</span><br><span class="line">redir https://nyacdn.moe permanent</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">handle /pico/* &#123;</span><br><span class="line">uri replace /pico/ /gh/xxxxx/pico/</span><br><span class="line">reverse_proxy https://cdn.jsdelivr.net &#123;</span><br><span class="line">header_up Host &#123;upstream_hostport&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>回到Caddyfile所在目录，使用<code>caddy validate</code>检查配置文件是否有问题</p><p>没有问题的话使用<code>caddy reload</code>重载配置文件，或者重启caddy</p><p>大功告成！<br /><img src="https://pic-oss.mouup.top/pic/2024/07/dc8fc1e6e08409f05d70b2207ff2b62e.png" alt="success" /></p><li id="footnote1">[1]:[参考Caddy文档关于reverse_proxy语法的说明](https://caddy2.dengxiaolong.com/docs/caddyfile/directives/reverse_proxy)</li>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;缘起&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#缘起&quot;&gt;&lt;/a&gt; 缘起&lt;/h2&gt;
&lt;p&gt;最近我把服务器的web server从nginx换到了Caddy2，（因为Caddy2真的太tm人性化了），但随之而来，我发现caddy反代的的</summary>
      
    
    
    
    <category term="tech" scheme="https://nyaku.moe/categories/tech/"/>
    
    
    <category term="Caddy,Caddy2,反向代理,jsdelivr,uri" scheme="https://nyaku.moe/tags/Caddy-Caddy2-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86-jsdelivr-uri/"/>
    
  </entry>
  
  <entry>
    <title>如何解决chrome自带翻译无法使用的问题（非一般的改hosts/魔法上网）</title>
    <link href="https://nyaku.moe/2023/03/18/google-translate-fix/"/>
    <id>https://nyaku.moe/2023/03/18/google-translate-fix/</id>
    <published>2023-03-18T12:42:07.000Z</published>
    <updated>2026-02-09T07:28:46.512Z</updated>
    
    <content type="html"><![CDATA[<p>上一年（2022年）10月份左右开始，谷歌翻译退出中国大陆，导致中国大陆地区的chrome自带翻译无法使用。目前网上的解决方案主要是修改hosts或者挂系统代理，但这两种方法一个容易失效，另一个不够方便，因此本文将向你介绍一种不一样的解决方法。</p><h1 id="写在前面"><a class="markdownIt-Anchor" href="#写在前面"></a> 写在前面</h1><p>如果你不想折腾，你可以直接下载<a href="https://pan.nyaku.moe/f/vakhp/chrome%E8%87%AA%E5%B8%A6%E7%BF%BB%E8%AF%91%E4%BF%AE%E5%A4%8D.zip">这个压缩包</a>，按照README里的教程操作即可，开箱即用。</p><p>如果上面的下载地址失效了可以用这个<a href="https://pan.baidu.com/s/1wzSlueNjLKC-VkHKA5gyCg?pwd=r5a6">备用下载地址</a></p><blockquote><p>因为workers每日调用额度只有10万次，如果太多人用，我自建的服务端可能会超限然后无法使用，所以强烈推荐大家自建服务端</p></blockquote><hr><p>如果你感兴趣的话可以继续往下看(●’◡’●)</p><hr><h1 id="原理说明"><a class="markdownIt-Anchor" href="#原理说明"></a> 原理说明</h1><p>本文介绍的方法是：<strong>「两层反向代理」</strong>，即先用cloudflare或者vercel反代谷歌翻译的api <code>translate.googleapis.com</code> ,再在本地用nginx反代第一层反代的域名</p><h1 id="哈吉马路哟"><a class="markdownIt-Anchor" href="#哈吉马路哟"></a> 哈吉马路哟！</h1><p>下面开始正式教程</p><h2 id="配置服务端反代配置服务端"><a class="markdownIt-Anchor" href="#配置服务端反代配置服务端"></a> 配置服务端反代（配置服务端）</h2><p>首先我们要用cf或者vercel反代谷歌翻译的api</p><h3 id="cloudflare"><a class="markdownIt-Anchor" href="#cloudflare"></a> cloudflare</h3><p>如果你选择使用cf的话，请参考以下步骤</p><p>1.打开<a href="https://dash.cloudflare.com/">cloudflare面板</a>，进入“workers”页面</p><p><img src="https://cdn.mouup.top/pico/pic2023-03-18212146.png" alt="workers" /></p><p>点击创建服务</p><p><img src="https://cdn.mouup.top/pico/pic20230318212309.png" alt="创建服务" /></p><p>点击快速编辑，替换为以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const hostname = &quot;https://translate.googleapis.com&quot;</span><br><span class="line"></span><br><span class="line">function handleRequest(request) &#123;</span><br><span class="line">    let url = new URL(request.url);</span><br><span class="line">    return fetch(new Request(hostname + url.pathname,request))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">addEventListener(&quot;fetch&quot;, event =&gt; &#123;</span><br><span class="line">  event.respondWith(handleRequest(event.request))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>点击保存部署</p><p>2.设置workers路由</p><blockquote><p>因为workers.dev被墙了</p></blockquote><p>回到主页，点击“网站”</p><p>点进你的域名，新建一条A记录，名称随意（这里我用translate）,ip地址随便填（比如我填8.8.8.8），<strong>一定要把云朵点上！</strong></p><p>进入“workers路由”<br /><img src="https://cdn.mouup.top/pico/pic2023-03-18213413.png" alt="workersluyou" /></p><p>点添加路由<br /><img src="https://cdn.mouup.top/pico/pic2023-03-18213646.png" alt="添加路由" /></p><p>&quot;路由&quot;填``https://&lt;你前面弄的域名&gt;/*<br />&quot;服务&quot;选择之前的那个workers<br />&quot;环境&quot;为production</p><p>保存即可</p><p>如果设置正确，大概一两分钟后，访问你设置的域名就可以肯定这样的页面了</p><p><img src="https://cdn.mouup.top/pico/pic20230318214009.png" alt="这样的页面" /></p><p>(别被404吓到了，这是正常的。另外，一般情况下谷歌的图标是显示不出来的)</p><h3 id="vercel"><a class="markdownIt-Anchor" href="#vercel"></a> vercel</h3><p>如果你不想用cf而是选择用vercel，你可以参考以下内容进行配置</p><p>首先注册vercel账号</p><p>然后用以下命令在本地安装vercel cli（注意，你必须先安装node）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g vercel</span><br></pre></td></tr></table></figure><p>然后登录vercel</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vercel login</span><br></pre></td></tr></table></figure><p>随便找个文件夹新建一个json文件，名字随意，粘贴以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;version&quot;: 2,</span><br><span class="line">  &quot;routes&quot;: [</span><br><span class="line">    &#123;&quot;src&quot;: &quot;/(.*)&quot;,&quot;dest&quot;: &quot;https://translate.googleapis.com/$1&quot;&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>保存退出，在json文件所在目录呼出终端，运行以下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">verceL-A &lt;文件名&gt;.json--prod</span><br></pre></td></tr></table></figure><p>按步骤部署，一般一直回车就行了</p><p>部署完成后打开vercel的面板，为这个project绑定一个域名，这里不多赘述</p><blockquote><p>因为vercel.app也被污染了</p></blockquote><p>到这里我们就完成了服务端的部署</p><h2 id="本地反代"><a class="markdownIt-Anchor" href="#本地反代"></a> 本地反代</h2><h3 id="下载nginx"><a class="markdownIt-Anchor" href="#下载nginx"></a> 下载nginx</h3><p>首先<a href="https://nginx.org/en/download.html">下载nginx</a></p><p><img src="https://cdn.mouup.top/pico/pic2023-03-19130226.png" alt="download" /></p><p>一般下载稳定版就好了</p><h3 id="自签证书"><a class="markdownIt-Anchor" href="#自签证书"></a> 自签证书</h3><p>0.你首先需要安装好openssl</p><h4 id="1创建ca证书"><a class="markdownIt-Anchor" href="#1创建ca证书"></a> 1.创建CA证书</h4><p>创建CA证书</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out nyaCA.key 2048</span><br></pre></td></tr></table></figure><p>生成CA公钥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -new -x509 -key nyaCA.key -out nyaCA.cer -days 36500</span><br></pre></td></tr></table></figure><p>按说明输入信息，其中Common可以随便填</p><h4 id="2创建服务器证书"><a class="markdownIt-Anchor" href="#2创建服务器证书"></a> 2.创建服务器证书</h4><p>首先生成服务器秘钥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out server.key 2048</span><br></pre></td></tr></table></figure><p>创建签名请求<br />新建一个名叫openssl.cnf的文件，粘贴以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">tsa_policy2 = 1.2.3.4.5.6</span><br><span class="line">tsa_policy3 = 1.2.3.4.5.7</span><br><span class="line">[ ca ]</span><br><span class="line">default_ca = CA_default  # The default ca section</span><br><span class="line">[ CA_default ]</span><br><span class="line">dir  = ./demoCA  # Where everything is kept</span><br><span class="line">certs  = $dir/certs  # Where the issued certs are kept</span><br><span class="line">crl_dir  = $dir/crl  # Where the issued crl are kept</span><br><span class="line">database = $dir/index.txt # database index file.</span><br><span class="line">new_certs_dir = $dir/newcerts  # default place for new certs.</span><br><span class="line">certificate = $dir/cacert.pem  # The CA certificate</span><br><span class="line">serial  = $dir/serial   # The current serial number</span><br><span class="line">crlnumber = $dir/crlnumber # the current crl number</span><br><span class="line">crl  = $dir/crl.pem   # The current CRL</span><br><span class="line">private_key = $dir/private/cakey.pem# The private key</span><br><span class="line">RANDFILE = $dir/private/.rand # private random number file</span><br><span class="line">x509_extensions = usr_cert  # The extentions to add to the cert</span><br><span class="line">name_opt  = ca_default  # Subject Name options</span><br><span class="line">cert_opt  = ca_default  # Certificate field options</span><br><span class="line">default_days = 365   # how long to certify for</span><br><span class="line">default_crl_days= 30   # how long before next CRL</span><br><span class="line">default_md = default  # use public key default MD</span><br><span class="line">preserve = no   # keep passed DN ordering</span><br><span class="line">policy  = policy_match</span><br><span class="line">[ policy_match ]</span><br><span class="line">countryName  = match</span><br><span class="line">stateOrProvinceName = match</span><br><span class="line">organizationName = match</span><br><span class="line">organizationalUnitName = optional</span><br><span class="line">commonName  = supplied</span><br><span class="line">emailAddress  = optional</span><br><span class="line">[ policy_anything ]</span><br><span class="line">countryName  = optional</span><br><span class="line">stateOrProvinceName = optional</span><br><span class="line">localityName  = optional</span><br><span class="line">organizationName = optional</span><br><span class="line">organizationalUnitName = optional</span><br><span class="line">commonName  = supplied</span><br><span class="line">emailAddress  = optional</span><br><span class="line">[ req ]</span><br><span class="line">default_bits  = 1024</span><br><span class="line">default_keyfile  = privkey.pem</span><br><span class="line">distinguished_name = req_distinguished_name</span><br><span class="line">attributes  = req_attributes</span><br><span class="line">x509_extensions = v3_ca # The extentions to add to the self signed cert</span><br><span class="line">string_mask = utf8only</span><br><span class="line">req_extensions = v3_req # The extensions to add to a certificate request</span><br><span class="line">[ req_distinguished_name ]</span><br><span class="line">countryName   = Country Name (2 letter code)</span><br><span class="line">countryName_default  = CN</span><br><span class="line">countryName_min   = 2</span><br><span class="line">countryName_max   = 2</span><br><span class="line">stateOrProvinceName  = State or Province Name (full name)</span><br><span class="line">stateOrProvinceName_default = Mama</span><br><span class="line">localityName   = Locality Name (eg, city)</span><br><span class="line">0.organizationName  = Organization Name (eg, company)</span><br><span class="line">0.organizationName_default = nya</span><br><span class="line">organizationalUnitName  = Organizational Unit Name (eg, section)</span><br><span class="line">commonName   = Common Name (e.g. server FQDN or YOUR name)</span><br><span class="line">commonName_max   = 64</span><br><span class="line">emailAddress   = Email Address</span><br><span class="line">emailAddress_max  = 64</span><br><span class="line">[ req_attributes ]</span><br><span class="line">challengePassword  = A challenge password</span><br><span class="line">challengePassword_min  = 4</span><br><span class="line">challengePassword_max  = 20</span><br><span class="line">unstructuredName  = An optional company name</span><br><span class="line">[ usr_cert ]</span><br><span class="line">basicConstraints=CA:FALSE</span><br><span class="line">nsCertType = client, email, objsign</span><br><span class="line">keyUsage = nonRepudiation, digitalSignature, keyEncipherment</span><br><span class="line">nsComment   = &quot;OpenSSL Generated Certificate&quot;</span><br><span class="line">subjectKeyIdentifier=hash</span><br><span class="line">authorityKeyIdentifier=keyid,issuer</span><br><span class="line">[ svr_cert ]</span><br><span class="line">basicConstraints=CA:FALSE</span><br><span class="line">nsCertType   = server</span><br><span class="line">keyUsage = nonRepudiation, digitalSignature, keyEncipherment, dataEncipherment, keyAgreement</span><br><span class="line">subjectKeyIdentifier=hash</span><br><span class="line">authorityKeyIdentifier=keyid,issuer</span><br><span class="line">extendedKeyUsage = serverAuth,clientAuth</span><br><span class="line">[ v3_req ]</span><br><span class="line">subjectAltName = @alt_names</span><br><span class="line"></span><br><span class="line">[ alt_names ]</span><br><span class="line">DNS.1 = translate.googleapis.com</span><br><span class="line">[ v3_ca ]</span><br><span class="line">subjectKeyIdentifier=hash</span><br><span class="line">authorityKeyIdentifier=keyid:always,issuer</span><br><span class="line">basicConstraints = CA:true</span><br><span class="line">[ crl_ext ]</span><br><span class="line">authorityKeyIdentifier=keyid:always</span><br><span class="line">[ proxy_cert_ext ]</span><br><span class="line">basicConstraints=CA:FALSE</span><br><span class="line">nsComment   = &quot;OpenSSL Generated Certificate&quot;</span><br><span class="line">subjectKeyIdentifier=hash</span><br><span class="line">authorityKeyIdentifier=keyid,issuer</span><br><span class="line">proxyCertInfo=critical,language:id-ppl-anyLanguage,pathlen:3,policy:foo</span><br><span class="line">[ tsa ]</span><br><span class="line">default_tsa = tsa_config1 # the default TSA section</span><br><span class="line">[ tsa_config1 ]</span><br><span class="line">dir  = ./demoCA  # TSA root directory</span><br><span class="line">serial  = $dir/tsaserial # The current serial number (mandatory)</span><br><span class="line">crypto_device = builtin  # OpenSSL engine to use for signing</span><br><span class="line">signer_cert = $dir/tsacert.pem  # The TSA signing certificate</span><br><span class="line">     # (optional)</span><br><span class="line">certs  = $dir/cacert.pem # Certificate chain to include in reply</span><br><span class="line">     # (optional)</span><br><span class="line">signer_key = $dir/private/tsakey.pem # The TSA private key (optional)</span><br><span class="line">default_policy = tsa_policy1  # Policy if request did not specify it</span><br><span class="line">     # (optional)</span><br><span class="line">other_policies = tsa_policy2, tsa_policy3 # acceptable policies (optional)</span><br><span class="line">digests  = md5, sha1  # Acceptable message digests (mandatory)</span><br><span class="line">accuracy = secs:1, millisecs:500, microsecs:100 # (optional)</span><br><span class="line">clock_precision_digits  = 0 # number of digits after dot. (optional)</span><br><span class="line">ordering  = yes # Is ordering defined for timestamps?</span><br><span class="line">    # (optional, default: no)</span><br><span class="line">tsa_name  = yes # Must the TSA name be included in the reply?</span><br><span class="line">    # (optional, default: no)</span><br><span class="line">ess_cert_id_chain = no # Must the ESS cert id chain be included?</span><br><span class="line">    # (optional, default: no)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>保存后运行以下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -config openssl.cnf -new -out server.req -key server.key</span><br></pre></td></tr></table></figure><p>注意这里的Common Name填<code>translate.googleapis.com</code></p><p>通过CA机构证书对服务器证书进行签名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -req  -extfile openssl.cnf -extensions v3_req -in server.req -out server.cer -CAkey nyaCA.key -CA nyaCA.cer -days 36500 -CAcreateserial -CAserial serial</span><br></pre></td></tr></table></figure><p>然后将生成的server.cer(公钥)和server.key(密钥)部署到nginx</p><h4 id="3信任ca机构证书"><a class="markdownIt-Anchor" href="#3信任ca机构证书"></a> 3.信任CA机构证书</h4><p>如果是Windows的话直接双击生成的nyaCA.cer，将证书导入到<code>受信任的根证书颁发机构即可</code></p><blockquote><p>自签证书部分参考了<a href="https://www.tangyuecan.com/2021/12/17/%E5%B1%80%E5%9F%9F%E7%BD%91%E5%86%85%E6%90%AD%E5%BB%BA%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8F%AF%E4%BF%A1%E4%BB%BB%E7%9A%84ssl%E8%AF%81%E4%B9%A6/">这篇文章</a></p></blockquote><blockquote><p>如果你懒得折腾可以直接用我给你的压缩包里签好的证书</p></blockquote><h3 id="修改nginx配置文件"><a class="markdownIt-Anchor" href="#修改nginx配置文件"></a> 修改nginx配置文件</h3><p>修改conf目录下的<code>nginx.conf</code>文件<br />在http的大括号内加入<code>include tranlate.conf;</code>(不要漏了分号)</p><p>在conf目录下新建一个名叫<code>translate.conf</code>的文件，粘贴以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl;</span><br><span class="line">    server_name translate.googleapis.com;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    ssl_certificate &lt;公钥路径&gt;; </span><br><span class="line">    ssl_certificate_key &lt;私钥路径&gt;; </span><br><span class="line"></span><br><span class="line">    client_max_body_size 50M;</span><br><span class="line"></span><br><span class="line">    location /</span><br><span class="line">  &#123;</span><br><span class="line">    proxy_pass https://&lt;服务端域名&gt;;   #注意后面没有“/”</span><br><span class="line">    proxy_set_header Host &lt;服务端域名&gt;;</span><br><span class="line">    #向后端传递访客 ip</span><br><span class="line">    proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line">    #向后端传递访客 ip （反代CF增加规则）</span><br><span class="line">   </span><br><span class="line">    proxy_ssl_name &lt;服务端域名&gt;;</span><br><span class="line">    proxy_ssl_server_name on;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>修改其中的&lt;服务端域名&gt;、&lt;公钥路径&gt;、&lt;私钥路径&gt;</p><h3 id="运行nginx"><a class="markdownIt-Anchor" href="#运行nginx"></a> 运行nginx</h3><p>建议先在nginx.exe所在目录用终端运行nginx，看看有没有报错</p><p>如果一切正常就可以双击nginx.exe让nginx在后台运行了</p><h3 id="修改hosts"><a class="markdownIt-Anchor" href="#修改hosts"></a> 修改hosts</h3><p>在<code>C:\Windows\System32\drivers\etc</code>下的hosts文件中添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 translate.googleapis.com</span><br></pre></td></tr></table></figure><h3 id="开机自启"><a class="markdownIt-Anchor" href="#开机自启"></a> 开机自启</h3><p>为nginx.exe创建快捷方式，然后将快捷方式复制到目录<code>C:\ProgramData\Microsoft\Windows\Start Menu\Programs\StartUp</code>下即可</p><p>至此大功告成</p><p><img src="https://cdn.mouup.top/pico/pic20230319114506.png" alt="test0" /></p><p><img src="https://cdn.mouup.top/pico/pic%E2%99%A1%E2%99%A1104950815_p0.png" alt="good" /></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;上一年（2022年）10月份左右开始，谷歌翻译退出中国大陆，导致中国大陆地区的chrome自带翻译无法使用。目前网上的解决方案主要是修改hosts或者挂系统代理，但这两种方法一个容易失效，另一个不够方便，因此本文将向你介绍一种不一样的解决方法。&lt;/p&gt;
&lt;h1 id=&quot;写在</summary>
      
    
    
    
    <category term="tech" scheme="https://nyaku.moe/categories/tech/"/>
    
    
    <category term="chrome,谷歌浏览器,谷歌翻译,nginx,反代" scheme="https://nyaku.moe/tags/chrome-%E8%B0%B7%E6%AD%8C%E6%B5%8F%E8%A7%88%E5%99%A8-%E8%B0%B7%E6%AD%8C%E7%BF%BB%E8%AF%91-nginx-%E5%8F%8D%E4%BB%A3/"/>
    
  </entry>
  
  <entry>
    <title>Stable Diffusion webui的部署运行以及embedding训练</title>
    <link href="https://nyaku.moe/2023/01/16/Stable-Diffusion-setup-run-train/"/>
    <id>https://nyaku.moe/2023/01/16/Stable-Diffusion-setup-run-train/</id>
    <published>2023-01-16T09:11:08.000Z</published>
    <updated>2026-02-09T07:02:17.705Z</updated>
    
    <content type="html"><![CDATA[<h2 id="随机写点东西"><a class="markdownIt-Anchor" href="#随机写点东西"></a> 随机写点东西</h2><p>我觉得是时候给刚学会 的ai绘画技巧做个归档了（不然以后忘了就又要重来了）</p><hr><h2 id="开始部署"><a class="markdownIt-Anchor" href="#开始部署"></a> 开始部署</h2><h3 id="我的系统信息"><a class="markdownIt-Anchor" href="#我的系统信息"></a> 我的系统信息</h3><p>系统：Windows10<br />GPU：RTX3060ti</p><h3 id="准备工作"><a class="markdownIt-Anchor" href="#准备工作"></a> 准备工作</h3><h4 id="安装anaconda"><a class="markdownIt-Anchor" href="#安装anaconda"></a> 安装anaconda</h4><p>访问<a href="https://www.anaconda.com/">anaconda官网</a>直接下载安装，建议使用IDM或者挂梯</p><p>安装时建议选择just me,这样更方便添加环境变量<br />勾选添加到path<br /><img src="https://cdn.mouup.top/pico/pic173019.png" alt="add to path" /></p><h4 id="网络"><a class="markdownIt-Anchor" href="#网络"></a> 网络</h4><p>1.最好准备一把梯子</p><p>2.对conda和pip进行换源</p><h5 id="conda换源"><a class="markdownIt-Anchor" href="#conda换源"></a> conda换源</h5><p>打开Windows终端，输入以下命令输出.condarc文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda config --set show_channel_urls yes</span><br></pre></td></tr></table></figure><p>打开<code>C:\users\你的用户名\.condarc</code></p><p>粘贴以下内容（换为清华源）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">channels:</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/</span><br><span class="line">ssl_verify: true</span><br></pre></td></tr></table></figure><h5 id="pip换源"><a class="markdownIt-Anchor" href="#pip换源"></a> pip换源</h5><p>在<code>C:\users\你的用户名\AppData\Roaming</code>中新建或打开<code>pip</code>文件夹，在里面新建或修改<code>pip.ini</code>文件，粘贴以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">index-url = https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure><h3 id="正式开搞"><a class="markdownIt-Anchor" href="#正式开搞"></a> 正式开搞</h3></br><h4 id="1环境配置"><a class="markdownIt-Anchor" href="#1环境配置"></a> 1.环境配置</h4><p>打开anaconda，新建一个环境，python版本选择3.10.8。不能用base环境因为base环境python版本为3.9，使用Stable Diffusion webui需要3.10.6以上</p><p><img src="https://cdn.mouup.top/pico/pic174403.png" alt="create" /></p><blockquote><p>当然你也可以在命令行创建环境</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;conda create -n aipaint python=3.10</span><br></pre></td></tr></table></figure></blockquote><p>配置环境时先clone项目仓库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.git</span><br></pre></td></tr></table></figure><p>进入项目仓库，右键「在终端中打开」，如果你没有这个选项，就按住shift右键在powershell中打开</p></br><p>激活创建好的环境</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate aipaint</span><br></pre></td></tr></table></figure><p>执行以下命令安装依赖项（如果的依赖项要求有改动，请改为最新要求）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install pytorch==1.12.1 torchvision==0.13.1 torchaudio==0.12.1 cudatoolkit=11.6 -c pytorch -c conda-forge</span><br></pre></td></tr></table></figure><p>如果换源成功的话安装过程是很快的</p></br><h4 id="2模型下载"><a class="markdownIt-Anchor" href="#2模型下载"></a> 2.模型下载</h4><blockquote><p>推荐下载novelai泄露的模型</p></blockquote><p>1.novelai模型:包括 4g的一般模型<a href="https://cloudflare-ipfs.com/ipfs/bafybeicpamreyp2bsocyk3hpxr7ixb2g2rnrequub3j2ahrkdxbvfbvjc4/model.ckpt">animefull-final-pruned</a>和7g的<a href="https://pan.nyaku.moe/f/2QhQ/animefull-latest.ckpt">animefull-final-latest模型</a></p><p>2.stable diffusion模型：前往<a href="https://cdn.mouup.top/pico/pic185053.png">huggingFace</a><br />这两个模型一个是毕竟小的，一个是比较大 的，自己选着下（需要注册huggleface账号）</p><p><img src="https://cdn.mouup.top/pico/pic185053.png" alt="stable-diffusion模型" /></p><p>3.Waifu Diffusion模型：<a href="https://huggingface.co/hakurei/waifu-diffusion-v1-4/tree/main">下载地址</a>,选择性下载.ckpt后缀的文件</p><h4 id="3运行"><a class="markdownIt-Anchor" href="#3运行"></a> 3.运行</h4><p>然后，在命令行输入<code>webui.bat</code>运行安装脚本（不要直接双击，否则会使用默认环境中的python3.9）然后脚本就会自动安装剩余的依赖项并运行Stable Diffusion webui</p><p>当你看到命令行输出以下内容时就部署完毕且成功运行了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Installing requirements for Web UI</span><br><span class="line">Launching Web UI with arguments:</span><br><span class="line">No module &#x27;xformers&#x27;. Proceeding without it.</span><br><span class="line">LatentDiffusion: Running in eps-prediction mode</span><br><span class="line">DiffusionWrapper has 859.52 M params.</span><br><span class="line">Loading weights [e6e8e1fc] from G:\stable-diffusion-webui\models\Stable-diffusion\novel.ckpt</span><br><span class="line">Applying cross attention optimization (Doggettx).</span><br><span class="line">Textual inversion embeddings loaded(4): ha_hutao, natsuki_nacho, nya_gzc, yileina</span><br><span class="line">Model loaded in 33.5s (0.5s create model, 30.1s load weights).</span><br><span class="line">Running on local URL:  http://127.0.0.1:7860</span><br><span class="line"></span><br><span class="line">To create a public link, set `share=True` in `launch()`.</span><br></pre></td></tr></table></figure><blockquote><p>你需要知道的一点：webui的脚本在初次运行时其实在项目目录新建了一个虚拟环境（venv）因此此后每一次运行webui只需要双击打开webui.bat文件即可</p></blockquote><h4 id="4额外配置"><a class="markdownIt-Anchor" href="#4额外配置"></a> 4.额外配置</h4><p>安装deepbooru和xformers</p><p>编辑项目目录下的webui-user.bat文件</p><p>它里面原本应该是这样的（没有中文）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line"></span><br><span class="line">set PYTHON= &lt;python路径&gt;</span><br><span class="line"></span><br><span class="line">set GIT= &lt;git路径&gt;</span><br><span class="line"></span><br><span class="line">set VENV_DIR= &lt;虚拟环境所在目录名称&gt; </span><br><span class="line"></span><br><span class="line">set COMMANDLINE_ARGS= &lt;你要附加的命令&gt;</span><br><span class="line"></span><br><span class="line">call webui.bat</span><br></pre></td></tr></table></figure><p><strong>python路径：</strong> 填<code>&lt;webui的目录路径&gt;\venv\Scripts\Python.exe</code>,例如<code>H:\stable-diffusion-webui\venv\Scripts\Python.exe</code></p><p><strong>git路径：</strong> 一般不用管</p><p><strong>虚拟环境所在目录名称：</strong> 默认为venv，不用修改</p><p><strong>你要附加的命令：</strong> 我们要安装deepbooru和xformers所以在这里填上<code>--deepbooru --xformers</code></p><p>改完之后就是这样的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line"></span><br><span class="line">set PYTHON=H:\stable-diffusion-webui\venv\Scripts\Python.exe</span><br><span class="line"></span><br><span class="line">set GIT=</span><br><span class="line"></span><br><span class="line">set VENV_DIR=venv</span><br><span class="line"></span><br><span class="line">set COMMANDLINE_ARGS=--xformers</span><br><span class="line"></span><br><span class="line">call webui.bat</span><br></pre></td></tr></table></figure><p>保存退出然后运行它就可以完成安装了（如果安装失败可能是网络问题）</p><hr><h2 id="是时候玩了"><a class="markdownIt-Anchor" href="#是时候玩了"></a> 是时候玩了</h2><p>打开<a href="http://127.0.0.1:7860/">127.0.0.1:7860</a>进入webui页面</p><h3 id="简单介绍"><a class="markdownIt-Anchor" href="#简单介绍"></a> 简单介绍</h3><p><img src="https://cdn.mouup.top/pico/pic191459.png" alt="介绍" /></p><p><em><strong>特别说明：</strong></em></p><p><strong>Sampling method:</strong> 采样方法。不同的采样方法得到图片的效果不同，二次元一般用Euler_a和DDIM</p><p><strong>Sampling steps：</strong> 生成步骤。越高代表细节越丰富，但过高不一定就很好，一般在30左右</p><p><strong>CFG Scale：</strong> 数值越高图像越接近关键词描述的内容，同时会影响柔和度和清晰度，Scale值越高我感觉图会看起来更清晰，也就是线条会更加明显。</p><p><strong>Batch count：</strong> 队列数（一般为1就好了）</p><p><strong>Batch size：</strong> 单个队列中生成多少张图</p><p><strong>Seed：</strong> 填写种子。可以填入别人的种子，使用种子可以获得相似的出图效果</p><p>输入咒语就可以开始生成图片啦！</p><blockquote><p>特别推荐</p><p>大佬开发的写咒语网站<a href="https://ai.dawnmark.cn/">AI词汇加速器</a>，可以快速生成咒语</p></blockquote><p><strong>常用咒语：</strong></p><p>1.一般默认正面咒语：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;an extremely delicate and beautiful girl&#125;, 8k wallpaper, &#123;&#123;&#123;masterpiece&#125;&#125;&#125;</span><br></pre></td></tr></table></figure><p>2.标准负面咒语：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lowres, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, low quality, normal quality, jpeg artifacts, signature, watermark, username, blurry</span><br></pre></td></tr></table></figure><h3 id="embedding的使用"><a class="markdownIt-Anchor" href="#embedding的使用"></a> embedding的使用</h3><blockquote><p>embedding，也就是一般私炉炼出来的丹，负载在模型上使用</p></blockquote><p>在网络上下载后缀为.pt的文件后。将其放入webui目录下的<code>embeddings</code>文件夹中即可使用</p><p>使用embedding时只需在正面咒语的框内输入制作者炼制时使用的prompt即可</p><p>例如我现在下载了一个伊雷娜的embedding，我只需使用``yileina```，就可以使用它了</p><p><img src="https://cdn.mouup.top/pico/pic194653.png" alt="lizi" /></p><p><img src="https://cdn.mouup.top/pico/pic00285-1028413214-yileina.png" alt="伊雷娜我真的好喜欢你啊！" /></p><h2 id="embedding的炼制"><a class="markdownIt-Anchor" href="#embedding的炼制"></a> embedding的炼制</h2><p>如果网上找不到你需要的embedding，那是时候来当炼金师了</p><h3 id="准备工作-2"><a class="markdownIt-Anchor" href="#准备工作-2"></a> 准备工作</h3><h4 id="首先你要找图"><a class="markdownIt-Anchor" href="#首先你要找图"></a> <strong>首先你要找图</strong></h4><p>1.可以取pixiv抓取画作（推荐使用<a href="https://chrome.google.com/webstore/detail/powerful-pixiv-downloader/dkndmhgdcmjdmkdonmbgjpijejdcilfh">Powerful Pixiv Downloader</a>）</p><p>2.或者取e站下图包（里站）</p><h4 id="然后对图片进行筛选和预处理"><a class="markdownIt-Anchor" href="#然后对图片进行筛选和预处理"></a> <strong>然后对图片进行筛选和预处理</strong></h4><p>1.请筛选出人物突出（单人），背景比较干净的图片，不要出现边框、文字等内容</p><p>2.对于背景比较复制的图片可以使用<a href="https://github.com/danielgatis/rembg">rembg</a>去除背景</p><p>安装过程非常简单，按照README就行了（注意先装onnxruntime-gpu，README里有说）</p><p>然后在终端进入你放选好的图片的文件夹(pic)的前一个文件夹，新建一个放置处理后文件的文件夹<picok1>，使用以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rembg p pic picok1</span><br></pre></td></tr></table></figure><p>记得看一下处理情况，有些如果处理得比较差的话可以考虑用回原图</p><p>3.裁剪：建议用<a href="https://www.onlinephotosoft.com/birme/">这个网站</a>手动裁剪，当然你也可以到下一步让webui来剪</p><p>用网站裁剪记得将图片大小调为512x512,处理完将图片存储到一个新的文件夹(我命名为picok2)</p><h4 id="调整webui设置"><a class="markdownIt-Anchor" href="#调整webui设置"></a> <strong>调整webui设置</strong></h4><p>打开<code>setting</code>选项卡，点<code>Training</code>,勾选<code>Move VAE and CLIP to RAM when training if possible. Saves VRAM.</code>  (这个操作可以在训练时节省显存)，然后点Apply settings确认修改。</p><h3 id="正式开始"><a class="markdownIt-Anchor" href="#正式开始"></a> 正式开始</h3><p><strong>点Train选项卡</strong></p><p><img src="https://cdn.mouup.top/pico/pic200634.png" alt="create" /></p><p>输入你要训练的embedding的名称,它将会作为你后续使用这个embedding时的prompt</p><p>在Number of vectors per token中，如果你是训练人物，建议在6以上，如果是画风建议在10以上</p><p><strong>点击Preprocess images预处理图片</strong></p><p><img src="https://cdn.mouup.top/pico/picchrome_SXZ2h807vR.png" alt="prepic" /></p><p><strong>Create flipped copies：</strong> 创建镜像图片。建议勾选，能得到双份样本。</p><p><strong>Split oversized images：</strong> 把过大的图片裁切成多张。我们已经切好图片了，所以不需要。</p><p><strong>Auto focal point crop：</strong> 自动聚焦，就是自动截出过大的图片的重点部分（ai认为的重点）。我们同样不需要</p><p><strong>Use BLIP for caption：</strong> 和 <strong>Use deepbooru for caption</strong> 建议勾选，特别是deepbooru对于二次元炼丹有帮助</p><p>点preprocess进行预处理</p><h4 id="点train进入训练选项"><a class="markdownIt-Anchor" href="#点train进入训练选项"></a> <strong>点train进入训练选项</strong></h4><p><img src="https://cdn.mouup.top/pico/pic201741.png" alt="train" /></p><p>未完待续…</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;随机写点东西&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#随机写点东西&quot;&gt;&lt;/a&gt; 随机写点东西&lt;/h2&gt;
&lt;p&gt;我觉得是时候给刚学会 的ai绘画技巧做个归档了（不然以后忘了就又要重来了）&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;开始部署&quot;</summary>
      
    
    
    
    <category term="tech" scheme="https://nyaku.moe/categories/tech/"/>
    
    
    <category term="Stable Diffusion,Novelai,Stable Diffusion webui,AI绘画,炼丹" scheme="https://nyaku.moe/tags/Stable-Diffusion-Novelai-Stable-Diffusion-webui-AI%E7%BB%98%E7%94%BB-%E7%82%BC%E4%B8%B9/"/>
    
  </entry>
  
  <entry>
    <title>用Cloudflare Tunnel进行内网穿透以及实现其他妙用</title>
    <link href="https://nyaku.moe/2022/08/16/cloudflare-tunnel/"/>
    <id>https://nyaku.moe/2022/08/16/cloudflare-tunnel/</id>
    <published>2022-08-16T08:09:54.000Z</published>
    <updated>2026-02-09T07:01:17.698Z</updated>
    
    <content type="html"><![CDATA[<h2 id="介绍"><a class="markdownIt-Anchor" href="#介绍"></a> 介绍</h2><p><a href="https://www.cloudflare.com/zh-cn/products/tunnel/">官方描述</a>如下：</p><blockquote><p>Cloudflare Tunnel 是一款隧道软件，可以快速安全地加密应用程序到任何类型基础设施的流量，让您能够隐藏你的 web 服&gt;务器 IP 地址，阻止直接攻击，从而专注于提供出色的应用程序。</p></blockquote><p>借助cloudflare tunnel（以下简称cft）可以实现内网端口的映射，在某些情况下可以直接替代nginx</p><h2 id="安装cft"><a class="markdownIt-Anchor" href="#安装cft"></a> 安装cft</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 添加源，&lt;RELEASE&gt;内填写版本代号（见下表）</span><br><span class="line">echo &#x27;deb [signed-by=/usr/share/keyrings/cloudflare-main.gpg] https://pkg.cloudflare.com/ &lt;RELEASE&gt; main&#x27; | </span><br><span class="line">sudo tee /etc/apt/sources.list.d/cloudflare-main.list</span><br><span class="line"># 添加GPG Key</span><br><span class="line">sudo curl https://pkg.cloudflare.com/cloudflare-main.gpg -o /usr/share/keyrings/cloudflare-main.gpg</span><br><span class="line"># 安装</span><br><span class="line">apt update&amp;&amp;apt install cloudflared</span><br></pre></td></tr></table></figure><h2 id="配置cft"><a class="markdownIt-Anchor" href="#配置cft"></a> 配置cft</h2><h3 id="登录"><a class="markdownIt-Anchor" href="#登录"></a> 登录</h3><p>首先需要登录cloudflare并指定你希望用于绑定cft的域名<br />（绑定后可以使用根域名或解析子域名）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared tunnel login</span><br></pre></td></tr></table></figure><h3 id="创建隧道"><a class="markdownIt-Anchor" href="#创建隧道"></a> 创建隧道</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared tunnel create &lt;隧道名称&gt;</span><br></pre></td></tr></table></figure><p>请删去“&lt;&gt;”</p><h3 id="解析域名"><a class="markdownIt-Anchor" href="#解析域名"></a> 解析域名</h3><p>解析的域名必须是没有过解析记录的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared tunnel route dns &lt;隧道名称&gt; &lt;域名&gt;</span><br></pre></td></tr></table></figure><h3 id="为隧道创建一个配置文件"><a class="markdownIt-Anchor" href="#为隧道创建一个配置文件"></a> 为隧道创建一个配置文件</h3><p>在<code>~/.cloudflared/knat.yml</code>下创建配置文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.cloudflared/knat.yml</span><br><span class="line">vim example.yml</span><br></pre></td></tr></table></figure><p>注：&quot;example&quot;是文件名请随意起<br />粘入以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url: http://localhost:2233  #内网端口</span><br><span class="line">tunnel: xxxxxxx-5b0e-xxxx-8034-xxxxxxx #创建隧道时输出的id</span><br><span class="line">credentials-file: /root/.cloudflared/&lt;创建隧道时输出的id&gt;.json</span><br></pre></td></tr></table></figure><h3 id="启动隧道"><a class="markdownIt-Anchor" href="#启动隧道"></a> 启动隧道</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared tunnel --config ~/.cloudflared/example.yml run</span><br></pre></td></tr></table></figure><p>这样本地2233端口就映射到你绑定的域名上了</p><h3 id="后台运行"><a class="markdownIt-Anchor" href="#后台运行"></a> 后台运行</h3><p>安装screen</p><p>Ubuntu/Debian</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get -y install screen</span><br></pre></td></tr></table></figure><p>CentOS/RedHat/Fedora</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install screen </span><br></pre></td></tr></table></figure><p>创建新窗口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">screen -S cft</span><br></pre></td></tr></table></figure><p>在新窗口中运行上面的cft运行指令</p><p>要令窗口在后台运行先按<code>ctrl+A</code>再按<code>ctrl+D</code></p><p>要重新打开该窗口，请用如下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">screen -r cft</span><br></pre></td></tr></table></figure><p>(cft只是一个自定义名称)</p><h2 id="end"><a class="markdownIt-Anchor" href="#end"></a> End</h2><p>我将我的网盘通过这种方式映射到了nyapan.mouup.top，访问速度甚至有所提升，但是不同地区速度会有差异</p><p>cloudflared tunnel除了内网穿透其实还可以有其他用处，保护网站这就不必说了，仔细想想如果在一台国内的服务器上使用它，是不是可以解决某个令人头疼的无题呢？（doge）</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;介绍&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#介绍&quot;&gt;&lt;/a&gt; 介绍&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.cloudflare.com/zh-cn/products/tunnel/&quot;&gt;官方描述&lt;/a&gt;如下：&lt;</summary>
      
    
    
    
    <category term="tech" scheme="https://nyaku.moe/categories/tech/"/>
    
    
    <category term="Cloudflare" scheme="https://nyaku.moe/tags/Cloudflare/"/>
    
  </entry>
  
  <entry>
    <title>如何使用docker部署mastodon</title>
    <link href="https://nyaku.moe/2022/07/26/mastodon-docker/"/>
    <id>https://nyaku.moe/2022/07/26/mastodon-docker/</id>
    <published>2022-07-26T07:57:01.000Z</published>
    <updated>2026-02-09T07:01:56.600Z</updated>
    
    <content type="html"><![CDATA[<p>使用docker部署mastodon可以很大程度上简化部署流程，而且对服务器性能要求似乎会更低。</p><h2 id="准备工作"><a class="markdownIt-Anchor" href="#准备工作"></a> 准备工作</h2><ul><li>一台服务器（我使用的是1核1G的服务器，建议不要学我）</li><li>ssh客户端</li><li>postgresql服务器（我使用的是Azure的学生版）<br />我为了方便迁移（<s>删除实例</s>）选择将数据库分开部署</li><li>mailgun</li></ul><h2 id="具体流程"><a class="markdownIt-Anchor" href="#具体流程"></a> 具体流程</h2><h3 id="服务器配置使用ubuntu-2004"><a class="markdownIt-Anchor" href="#服务器配置使用ubuntu-2004"></a> 服务器配置（使用Ubuntu 20.04）</h3><p>参照<a href="https://docs.joinmastodon.org/admin/prerequisites/">mastodon官方文档</a>进行配置</p><p>1.编辑/etc/ssh/sshd_config并查找PasswordAuthentication. 确保它未注释并设置为no. 如果您进行了任何更改，请重新启动 sshd：</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart ssh.service </span><br></pre></td></tr></table></figure><p>2.更新系统包</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update &amp;&amp; apt upgrade -y </span><br></pre></td></tr></table></figure><p>3.安装 fail2ban</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install fail2ban </span><br></pre></td></tr></table></figure><p>编辑/etc/fail2ban/jail.local加入以下内容</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[DEFAULT]</span><br><span class="line">destemail = your@email.here</span><br><span class="line">sendername = Fail2Ban</span><br><span class="line"></span><br><span class="line">[sshd]</span><br><span class="line">enabled = true</span><br><span class="line">port = 22</span><br><span class="line"></span><br><span class="line">[sshd-ddos]</span><br><span class="line">enabled = true</span><br><span class="line">port = 22</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>重启fail2ban</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart fail2ban</span><br></pre></td></tr></table></figure><p>4.安装防火墙并仅将 SSH、HTTP 和 HTTPS 端口列入白名单</p><p>首先，安装<code> iptables-persistent</code>。在安装过程中，它会询问您是否要保留当前规则,选择拒绝。</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install -y iptables-persistent</span><br></pre></td></tr></table></figure><p>编辑<code>/etc/iptables/rules.v4 </code>加入以下内容</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"> *filter</span><br><span class="line"></span><br><span class="line">#  Allow all loopback (lo0) traffic and drop all traffic to 127/8 that doesn&#x27;t use lo0</span><br><span class="line">-A INPUT -i lo -j ACCEPT</span><br><span class="line">-A INPUT ! -i lo -d 127.0.0.0/8 -j REJECT</span><br><span class="line"></span><br><span class="line">#  Accept all established inbound connections</span><br><span class="line">-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br><span class="line"></span><br><span class="line">#  Allow all outbound traffic - you can modify this to only allow certain traffic</span><br><span class="line">-A OUTPUT -j ACCEPT</span><br><span class="line"></span><br><span class="line">#  Allow HTTP and HTTPS connections from anywhere (the normal ports for websites and SSL).</span><br><span class="line">-A INPUT -p tcp --dport 80 -j ACCEPT</span><br><span class="line">-A INPUT -p tcp --dport 443 -j ACCEPT</span><br><span class="line"></span><br><span class="line">#  Allow SSH connections</span><br><span class="line">#  The -dport number should be the same port number you set in sshd_config</span><br><span class="line">-A INPUT -p tcp -m state --state NEW --dport 22 -j ACCEPT</span><br><span class="line"></span><br><span class="line">#  Allow ping</span><br><span class="line">-A INPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT</span><br><span class="line"></span><br><span class="line">#  Log iptables denied calls</span><br><span class="line">-A INPUT -m limit --limit 5/min -j LOG --log-prefix &quot;iptables denied: &quot; --log-level 7</span><br><span class="line"></span><br><span class="line">#  Reject all other inbound - default deny unless explicitly allowed policy</span><br><span class="line">-A INPUT -j REJECT</span><br><span class="line">-A FORWARD -j REJECT</span><br><span class="line"></span><br><span class="line">COMMIT</span><br></pre></td></tr></table></figure><p>手动加载配置</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables-restore &lt; /etc/iptables/rules.v4</span><br></pre></td></tr></table></figure><p>5.安装常用命令</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install -y curl wget gnupg apt-transport-https lsb-release ca-certificates</span><br></pre></td></tr></table></figure><p>6.安装docker和docker-compose</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> bash &lt;(curl -L https://get.docker.com/)</span><br><span class="line">sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.27.4/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span><br><span class="line">sudo chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure><h3 id="部署mastodon"><a class="markdownIt-Anchor" href="#部署mastodon"></a> 部署mastodon</h3><p>为了便于管理，你可以新建一个用户</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adduser mastodon</span><br></pre></td></tr></table></figure><p>进入该用户的文件夹</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /home/mastodon</span><br></pre></td></tr></table></figure><p>为mastodon新建一个文件夹并进入</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir mastodon &amp; cd mastodon</span><br></pre></td></tr></table></figure><p>拉取最新版镜像</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull tootsuite/mastodon:latest</span><br><span class="line">wget https://raw.githubusercontent.com/tootsuite/mastodon/master/docker-compose.yml</span><br></pre></td></tr></table></figure><p>修改docker-compose.yml</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim docker-compose.yml</span><br></pre></td></tr></table></figure><p>! 找到<code>web</code>、<code>streaming</code>、<code>sidekiq</code>分类，将其中的<code>image: tootsuite/mastodon</code>全部改成<code>image: tootsuite/mastodon:latest</code></p><p>（latest可以改成其他版本号，这取决于你拉取的镜像版本）</p><p>将elasticsearch版本改为7.10.2</p><p>保存退出</p><h3 id="正式开始部署"><a class="markdownIt-Anchor" href="#正式开始部署"></a> 正式开始部署</h3><p>在<code>/home/mastodon/mastodon</code>文件夹中创建空白<code>.env.production</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch .env.production</span><br></pre></td></tr></table></figure><p>root用户中执行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose run --rm web bundle exec rake mastodon:setup</span><br></pre></td></tr></table></figure><p>然后它会询问一系列问题：</p><ol><li><p>Domain name: （你的域名）</p></li><li><p>Do you want to enable single user mode? No.（是否使用单人模式，选择“不”）</p></li><li><p>Are you using Docker to run Mastodon? Yes</p></li><li><ul><li>PostgreSQL host: （这取决于你自己的postgresql地址）</li><li>PostgreSQL port: 5432</li><li>Name of PostgreSQL database: 这取决于你自己的postgresql数据库名称）</li><li>Name of PostgreSQL user: （你的数据库账号）</li><li>Password of PostgreSQL user: （你的数据库密码）</li></ul></li><li><ul><li>Redis host: mastodon_redis_1</li></ul><p>（注意这里的mastodon，如果在上面你新建的文件夹为其他名字请改为你自己所取的名字）</p><ul><li>Redis port: 6379</li><li>Redis password: （无密码直接回车）</li></ul></li><li><p>Do you want to store uploaded files on the cloud?<br />（是否使用对象储存，取决于个人需求，若不使用则媒体文件全部储存在本服务器，否则请配置对象储存，若使用对象储存请填写相关参数）</p></li><li><p>Do you want to send e-mails from localhost? No<br />（填写你的smtp发信资料,我使用了mailgun）</p></li></ol><p>！然后会出现<code>.env.production</code>配置,请先复制下来，进程完成后请编辑<code>.env.production</code>，并加入复制的内容</p><p>然后它会问你是否你初始化数据库和创建管理员账户，均填yes</p><p>为相应文件夹赋权</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown 991:991 -R ./public</span><br></pre></td></tr></table></figure><p>启动Mastodon</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker-compose down</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><h3 id="nginx配置"><a class="markdownIt-Anchor" href="#nginx配置"></a> nginx配置</h3><p>安装nginx</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install nginx -y</span><br></pre></td></tr></table></figure><p>配置nginx</p><p>进入nginx配置文件目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/nginx/conf.d</span><br></pre></td></tr></table></figure><p>下载官方配置文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/mastodon/mastodon/main/dist/nginx.conf &amp; mv nginx.conf mastodon.conf</span><br></pre></td></tr></table></figure><p>编辑配置文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim mastodon.conf</span><br></pre></td></tr></table></figure><p>将所有example.com改成你自己的域名<br />将<code>/home/mastodon/live/public</code>改成<code>/home/mastodon/mastodon/public</code></p><p>先将<code>listen 443 ssl http2;</code>、<code>listen [::]:443 ssl http2</code>以及所有ssl开头的项用#注释掉</p><p>保存退出</p><p>获取ssl证书（使用cerbot）<br />安装cerbot</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apt install snapd</span><br><span class="line">sudo snap install core; sudo snap refresh core</span><br><span class="line">sudo snap install --classic certbot</span><br><span class="line">sudo ln -s /snap/bin/certbot /usr/bin/certbot</span><br></pre></td></tr></table></figure><p>获取证书</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot certonly --nginx -d</span><br></pre></td></tr></table></figure><p>重新编辑nginx配置文件，将之前的注释内容取消注释<br />将<code>ssl_certificate</code>和<code>ssl_certificate_key</code>也取消注释</p><p>使用<code>nginx -t</code>检查配置是否有误</p><p>无误后使用<code>ngnix -s reload</code>重载配置</p><p>然后你用你的域名应该就可以打开mastodon了（当然，前提是你设置好了dns）</p><p><img src="https://cdn.mouup.top/pico/pic20220720_061559073_iOS.jpg" alt="" /></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;使用docker部署mastodon可以很大程度上简化部署流程，而且对服务器性能要求似乎会更低。&lt;/p&gt;
&lt;h2 id=&quot;准备工作&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#准备工作&quot;&gt;&lt;/a&gt; 准备工作&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;一台服务</summary>
      
    
    
    
    <category term="tech" scheme="https://nyaku.moe/categories/tech/"/>
    
    
    <category term="技术" scheme="https://nyaku.moe/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>正式启用nyaku.moe</title>
    <link href="https://nyaku.moe/2022/07/11/nyaku-moe/"/>
    <id>https://nyaku.moe/2022/07/11/nyaku-moe/</id>
    <published>2022-07-11T10:03:00.000Z</published>
    <updated>2026-02-09T07:01:58.902Z</updated>
    
    <content type="html"><![CDATA[<h3 id="太棒了兴奋"><a class="markdownIt-Anchor" href="#太棒了兴奋"></a> 太棒了(兴奋)</h3><p>从即日起本站终于能换上.moe后缀的域名了<br />站长已经期待这一天很久了（doge)</p><h3 id="域名情况"><a class="markdownIt-Anchor" href="#域名情况"></a> 域名情况</h3><p>域名购置于<a href="https://www.namesilo.com/">namesilo</a>，支持支付宝，而且只卖90（不是广告）</p><p>先前的域名将会拿去备案备案<br />讲白了就是备案要关站被迫换域名</p><p>无论怎样，这将是新的开始</p><p><img src="https://pico.cdn.mouup.top/pic20220603_132343093_iOS.jpg" alt="一张伊雷娜的图" /></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;太棒了兴奋&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#太棒了兴奋&quot;&gt;&lt;/a&gt; 太棒了(兴奋)&lt;/h3&gt;
&lt;p&gt;从即日起本站终于能换上.moe后缀的域名了&lt;br /&gt;
站长已经期待这一天很久了（doge)&lt;/p&gt;
&lt;h3 id=&quot;域名</summary>
      
    
    
    
    <category term="tech" scheme="https://nyaku.moe/categories/tech/"/>
    
    
  </entry>
  
  <entry>
    <title>关于Nya网盘</title>
    <link href="https://nyaku.moe/2022/02/10/%E5%85%B3%E4%BA%8ENya%E7%BD%91%E7%9B%98/"/>
    <id>https://nyaku.moe/2022/02/10/%E5%85%B3%E4%BA%8ENya%E7%BD%91%E7%9B%98/</id>
    <published>2022-02-10T04:23:29.000Z</published>
    <updated>2026-02-09T06:52:55.478Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2><p>本文主要会详细介绍Nya网盘的运行方式<sub>(这个词会不会不太准确)</sub></p><p><img src="https://cdn.mouup.top/pico/picgbl1.jpg" alt="gbl" /></p><h2 id="那么开始吧"><a class="markdownIt-Anchor" href="#那么开始吧"></a> 那么开始吧</h2><h3 id="1关于搭建"><a class="markdownIt-Anchor" href="#1关于搭建"></a> 1.关于搭建</h3><ul><li><p>Nya盘使用Cloudreve进行搭建，如果你感兴趣的话不妨来Gayhub了解一下这个<a href="https://github.com/cloudreve/Cloudreve">项目</a><br /></br></p></li><li><p>目前，Nya盘的主服务器托管于微软Azure美国中部机房，（因为较近的霓虹和香港资费太贵了，微软免费账户仅允许在美国机房创建免费VM）<br /></br></p><p>之前有一段时间（就是访问特别快的那段时间），我尝试将服务器迁到了霓虹，但资费实在太离谱了，恳请各位谅解</p></li></ul><p><img src="https://cdn.mouup.top/pico/pic2.1-2.5.png" alt="2.1-2.5" /></p><p>当然，现在网盘使用了cloudflare,在速度是是有一定提升的</p></br><h3 id="2关于文件的存储"><a class="markdownIt-Anchor" href="#2关于文件的存储"></a> 2.关于文件的存储</h3><p>        我相信这是大家最关心的问题<br />        目前，依然受限于成本（doge）所有的文件都存储于Onedrive<br />        使用的是笔者自己注册的开发者账户，到目前这个账户已稳定使用超过两年<br />        所以文件稳定度还是比较好的<br />        如果微软未来不再提供开发者账户，笔者会考虑购买office365,如果有条件（当然那是之后的事）也可以考虑使用云厂商的储存服务<br /></br><br />        另外，如果各位担心网盘服务器炸 掉导致无法加载外链也可以自己获取文件的真实地址（即OneDrive文件地址）<br />        只要在网盘点击下载，复制得到的下载链接就是OneDrive的文件地址<br /></br></p><h3 id="3成本"><a class="markdownIt-Anchor" href="#3成本"></a> 3.成本</h3><p>        Nya盘能运作的前提当然是低成本，这一点是毋庸置疑的<br />        毕竟笔者也只是一个普通学生</p><ul><li><p>这里是成本分析（至今2022.2.10）</p><table><thead><tr><th>序号</th><th>项目</th><th>目前成本</th><th>备注</th></tr></thead><tbody><tr><td>1</td><td>服务器费用</td><td>45+84元</td><td>edu邮箱成本+阿里云服务器成本</td></tr><tr><td>2</td><td>带宽</td><td>free</td><td>文件传输使用的流量几乎全部由OneDrive提供</td></tr><tr><td>3</td><td>文件存储</td><td>free</td><td>OneDrive不花钱</td></tr></tbody></table></li><li><p>注：阿里云服务器位于华北，网盘的数据库所在地</p></li></ul><p>        当然我也十分乐意有天使投资人捐赠一台香港的服务器，或者提供一个备案的二级域名，因为笔者无法确定Azure的免费福利会持续多久</p><h2 id="一些话"><a class="markdownIt-Anchor" href="#一些话"></a> 一些话</h2><p>        我看到有人问目前网盘背后是否有团队，那自然是没有的，现在这个体量其实一个人管理也很足够了<br />        当然，笔者也很欢迎有人来帮忙 <s>那就可以摆烂了</s>，如果想帮忙也可以QQ联系（频道、官方1、2、3、5、6群，搬运工行会和宣发部部群都可以找到我）</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#前言&quot;&gt;&lt;/a&gt; 前言&lt;/h2&gt;
&lt;p&gt;本文主要会详细介绍Nya网盘的运行方式&lt;sub&gt;(这个词会不会不太准确)&lt;/sub&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.</summary>
      
    
    
    
    
    <category term="技术" scheme="https://nyaku.moe/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>HELLO WORLD</title>
    <link href="https://nyaku.moe/2021/08/16/WORLD/"/>
    <id>https://nyaku.moe/2021/08/16/WORLD/</id>
    <published>2021-08-16T04:33:17.000Z</published>
    <updated>2026-02-09T06:52:40.851Z</updated>
    
    <content type="html"><![CDATA[<!-- wp:video --><figure class="wp-block-video"><video controls poster="https://mouup.top/wp-content/uploads/2021/08/HELLO　WORLD2.0.png" src="https://nyapan.mouup.top/api/v3/file/source/38/HELLO%20WORLD.mp4?sign=f0FAHkMErY5gERjMBFeiPUoGYYik7O0UY-BxSnDfhhQ%3D%3A0"></video></figure><!-- /wp:video -->]]></content>
    
    
      
      
    <summary type="html">&lt;!-- wp:video --&gt;
&lt;figure class=&quot;wp-block-video&quot;&gt;&lt;video controls poster=&quot;https://mouup.top/wp-content/uploads/2021/08/HELLO　WORLD2.0.png&quot; sr</summary>
      
    
    
    
    
    <category term="二次元,混剪,动画,UP" scheme="https://nyaku.moe/tags/%E4%BA%8C%E6%AC%A1%E5%85%83-%E6%B7%B7%E5%89%AA-%E5%8A%A8%E7%94%BB-UP/"/>
    
  </entry>
  
  <entry>
    <title>ServerStatus-Hotaru云探针----搭建服务器监控室 （已弃用）</title>
    <link href="https://nyaku.moe/2021/08/09/ServerStatus-Hotaru%E4%BA%91%E6%8E%A2%E9%92%88-%E6%90%AD%E5%BB%BA%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9B%91%E6%8E%A7%E5%AE%A4/"/>
    <id>https://nyaku.moe/2021/08/09/ServerStatus-Hotaru%E4%BA%91%E6%8E%A2%E9%92%88-%E6%90%AD%E5%BB%BA%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9B%91%E6%8E%A7%E5%AE%A4/</id>
    <published>2021-08-09T10:14:29.000Z</published>
    <updated>2026-02-09T07:02:10.736Z</updated>
    
    <content type="html"><![CDATA[<h2 id="过时提醒"><a class="markdownIt-Anchor" href="#过时提醒"></a> 过时提醒</h2><p>我现在已经转战uptime了<br /><a href="https://status.mouup.top">一之濑亚子的监控室</a></p><h2 id="效果一览"><a class="markdownIt-Anchor" href="#效果一览"></a> 效果一览</h2><p><img src="https://cdn.mouup.top/pico/pic%E7%9B%91%E6%8E%A7%E5%AE%A4%E6%88%AA%E5%9B%BE1.png" alt="" /><br /><img src="https://cdn.mouup.top/pico/pic%E7%9B%91%E6%8E%A7%E5%AE%A4%E6%88%AA%E5%9B%BE2.png" alt="" /></p><p><a href="https://care.mouup.top/" title="我的监控室">我的监控室</a></p><h2 id="开始搭建"><a class="markdownIt-Anchor" href="#开始搭建"></a> 开始搭建</h2><h3 id="开始之前"><a class="markdownIt-Anchor" href="#开始之前"></a> 开始之前</h3><p>在开始搭建之前，我们首先要明确两个概念<br />服务端和客户端<br />服务端：即“监控室”，安装在放置“监控网站”的服务器上<br />（安装服务端的服务器同时可以安装客户端，相当于监控自己）<br />客户端：即“摄像头”，安装在需要被监控的服务器上</p><h3 id="正式开始"><a class="markdownIt-Anchor" href="#正式开始"></a> 正式开始</h3><h4 id="1-下载安装脚本"><a class="markdownIt-Anchor" href="#1-下载安装脚本"></a> 1 下载安装脚本</h4><p>如果正在使用的账户不是，先使用<code>sudo su</code> 登入root账户，否则后面会因权限不够安装失败<br />然后使用以下命令下载脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/CokeMine/ServerStatus-Hotaru/master/status.sh</span><br></pre></td></tr></table></figure><h4 id="2-配置服务端服务器完全干净未安装过任何环境如宝塔nginx"><a class="markdownIt-Anchor" href="#2-配置服务端服务器完全干净未安装过任何环境如宝塔nginx"></a> 2 配置服务端（服务器完全干净，未安装过任何环境，如宝塔，nginx)</h4><p>使用<code>bash status.sh s</code>命令打开服务段脚本<br />然后回出现以下选项</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> 0. 升级脚本</span><br><span class="line"> ————————————</span><br><span class="line">  1. 安装 服务端</span><br><span class="line">  2. 更新 服务端</span><br><span class="line">  3. 卸载 服务端</span><br><span class="line">————————————</span><br><span class="line">  4. 启动 服务端</span><br><span class="line">  5. 停止 服务端</span><br><span class="line">  6. 重启 服务端</span><br><span class="line">————————————</span><br><span class="line">  7. 设置 服务端配置</span><br><span class="line">  8. 查看 服务端信息</span><br><span class="line">  9. 查看 服务端日志</span><br><span class="line">————————————</span><br><span class="line"> 10. 切换为 客户端菜单</span><br></pre></td></tr></table></figure><p>输入1开始安装，如果你没有使用宝塔面板或没有安装其他web服务器（例如nginx)可以直接一路回车</p><h4 id="已配置其他web服务器"><a class="markdownIt-Anchor" href="#已配置其他web服务器"></a> 已配置其他web服务器</h4><p>操作同上<br />但到了<br /><code>[信息] 是否由脚本自动配置HTTP服务(服务端的在线监控网站)，如果选择 N，则请在其他HTTP服务中配置网站根目录为：/usr/local/ServerStatus/web [Y/n] (默认: Y 自动部署):</code><br />这一步选N，不部署HTTP服务<br />然后请自行到你已安装了的web服务器去配置HTTP服务，只要将<br />网站根目录设置为/usr/local/ServerStatus/web即可</p><h4 id="安装了宝塔面板"><a class="markdownIt-Anchor" href="#安装了宝塔面板"></a> 安装了宝塔面板</h4><p>同样是到配置HTTP服务器那一步选N<br />打开宝塔面板<br />新建网站<br />修改网站运行目录为/usr/local/ServerStatus/web<br />注意：在网站设置的“网站目录”一栏修改运行目录是不行的<br />宝塔面板不允许将运行目录设置在usr目录下<br /><img src="https://cdn.mouup.top/pico/pic%E5%AE%9D%E5%A1%94%E6%8A%A5%E9%94%99.png" alt="" /></p><p>所以你需要在配置文件的root行将默认的运行路径改为/usr/local/ServerStatus/web<br /><img src="https://cdn.mouup.top/pico/pic151121.png" alt="" /><br />就是图片中标黄的一行</p><h4 id="3-创建监控账户"><a class="markdownIt-Anchor" href="#3-创建监控账户"></a> 3 创建监控账户</h4><p>这里的每个账户只能对应一台服务器，安装客户端时就会询问账号密码<br />使用<code>bash status.sh s</code>进入服务端配置界面<br />键入7进入 “设置 服务端配置”<br />键入1 新建账户 注意密码不能使用特殊字符，只能是数字和字母，否则会报错账号或密码错误</p><p>该程序本身自带了一个服务器，可以删除</p><h4 id="安装客户端"><a class="markdownIt-Anchor" href="#安装客户端"></a> 安装客户端</h4><p>在此之前，请务必开放探针程序监听的端口，默认端口为35601<br />如果自己修改了请记得放行<br />注意：如果使用了宝塔面板，云服务商和宝塔面板都要设置端口放行</p><p>使用<code>bash status.sh c</code>进入客户端安装界面，如果是本机安装可直接使用127.0.0.1（本机），如果是其他服务器，请输入服务端公网IP或你设置的域名</p><p>账号密码输入你为这个客户端设置的账号密码</p><p>配置完成后回到服务端，重启服务端（先停止再启动）</p><p>正常来说到这里配置就完成了</p><h3 id="其他"><a class="markdownIt-Anchor" href="#其他"></a> 其他</h3><p>监控网站的title，图标等可以在源码修改</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;过时提醒&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#过时提醒&quot;&gt;&lt;/a&gt; 过时提醒&lt;/h2&gt;
&lt;p&gt;我现在已经转战uptime了&lt;br /&gt;
&lt;a href=&quot;https://status.mouup.top&quot;&gt;一之濑亚子的监控室&lt;</summary>
      
    
    
    
    <category term="tech" scheme="https://nyaku.moe/categories/tech/"/>
    
    
  </entry>
  
  <entry>
    <title>Dev-sidecar工具解决程序员各种网络问题</title>
    <link href="https://nyaku.moe/2021/07/01/Dev-sidecar%E5%B7%A5%E5%85%B7%E8%A7%A3%E5%86%B3%E7%A8%8B%E5%BA%8F%E5%91%98%E5%90%84%E7%A7%8D%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98/"/>
    <id>https://nyaku.moe/2021/07/01/Dev-sidecar%E5%B7%A5%E5%85%B7%E8%A7%A3%E5%86%B3%E7%A8%8B%E5%BA%8F%E5%91%98%E5%90%84%E7%A7%8D%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98/</id>
    <published>2021-07-01T04:12:36.000Z</published>
    <updated>2026-02-09T07:01:25.077Z</updated>
    
    <content type="html"><![CDATA[<h2 id="注意"><a class="markdownIt-Anchor" href="#注意"></a> 注意</h2><p>本项目在gitee上已被封禁，作者已停止维护</p><h2 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h2><p>之前GitHub有时还能打开，最近我突然就打不开GitHub。并且通过之前的修改hosts文件的方式已经无法解决该问题，在经过多方求助后，我找到了这款工具——dev-sidecar。</p><h2 id="下载地址"><a class="markdownIt-Anchor" href="#下载地址"></a> 下载地址</h2><p><a href="https://github.com/docmirror/dev-sidecar">Github仓库</a><br /><a href="https://gitee.com/docmirror/dev-sidecar"><s>Gitee仓库</s></a>（好像寄了）<br />打开链接后Windows下载.exe文件，mac下载.dmg文件<br /><a href="https://iamswlx-my.sharepoint.com/:u:/g/personal/iamswlx_iamswlx_onmicrosoft_com/EfP-B0X6ZVVMs1ydazC312YBKjP0W5fbcE_O29LM3Knkxw?e=rhxGlh">onedrive</a>(只有Windows版）</p><h2 id="介绍"><a class="markdownIt-Anchor" href="#介绍"></a> 介绍</h2><h3 id="食用"><a class="markdownIt-Anchor" href="#食用"></a> 食用</h3><p>1、下载安装<br />2、第一次打开会提示安装证书，按照教程来就行了<br />3、开启加速</p><p><img src="https://rawgh.cdn.mouup.top/docmirror/dev-sidecar/master/doc/index.png" alt="主页图片来自github" /></p><h3 id="功能"><a class="markdownIt-Anchor" href="#功能"></a> 功能</h3><p>正常功能主要分为安全模式和默认模式<br />增强模式默认锁定无法使用</p><blockquote><h3 id="安全模式"><a class="markdownIt-Anchor" href="#安全模式"></a> 安全模式</h3><ul><li>此模式：关闭拦截、关闭增强、开启dns优选、开启测速</li><li>最安全，无需安装证书，可以在浏览器地址栏左侧查看域名证书</li><li>功能也最弱，只有特性1，相当于查询github的国外ip，手动改hosts一个意&gt;&gt;思。</li><li>github的可访问性不稳定，取决于IP测速，如果有绿色ip存在，就 <code>有可能</code> 可以直连访问。</li></ul><h3 id="默认模式"><a class="markdownIt-Anchor" href="#默认模式"></a> 默认模式</h3><ul><li>此模式：开启拦截、关闭增强、开启dns优选、开启测速</li><li>需要安装证书</li><li>功能上包含特性1/2/3/4。</li></ul><h3 id="增强模式"><a class="markdownIt-Anchor" href="#增强模式"></a> 增强模式</h3><ul><li>此模式：开启拦截、开启增强、开启dns优选、关闭测速</li><li>需要安装证书</li><li>功能上包含特性1/2/3/4/5</li><li>由于敏感原因，默认关闭，感兴趣的可以私下交流<br />开了这个模式前面的都不香了</li></ul></blockquote><p><a href="https://github.com/docmirror/dev-sidecar#readme">作者README</a></p><h3 id="关于增强模式"><a class="markdownIt-Anchor" href="#关于增强模式"></a> 关于增强模式</h3><p>开启方法附在Onedrive下载的压缩包中</p><h4 id="搭建代理服务器教程"><a class="markdownIt-Anchor" href="#搭建代理服务器教程"></a> 搭建代理服务器教程</h4><h5 id="材料"><a class="markdownIt-Anchor" href="#材料"></a> 材料</h5><p>服务器一台（拥有海外ip)</p><h5 id="步骤"><a class="markdownIt-Anchor" href="#步骤"></a> 步骤</h5><ol><li>使用putty,xshell等软件连接服务器</li><li>使用以下命令安装宝塔面板（Ubuntu，centos,denbian均适用）</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSO http://download.bt.cn/install/install_panel.sh &amp;&amp; bash install_panel.sh</span><br></pre></td></tr></table></figure><ol start="3"><li><p>新建网站并把域名指向本服务器</p></li><li><p>申请ssl证书并开启强制https</p></li><li><p>打开网站配置文件</p></li><li><p>在&quot;error_log&quot;后添加以下内容</p></li></ol><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">location</span><span class="regexp"> ^~/xxxxxxxx/</span> &#123;  <span class="comment"># xxxxxxxx 改成你自己随便任意的前缀地址</span></span><br><span class="line">        <span class="attribute">resolver</span> <span class="number">1.1.1.1</span> ipv6=<span class="literal">off</span>;</span><br><span class="line">        <span class="attribute">if</span> ( <span class="variable">$http_dspassword</span> != <span class="string">&#x27;your password&#x27;</span> )&#123; <span class="comment"># 校验密码，如果不配置密码，去掉它即可</span></span><br><span class="line">            <span class="attribute">return</span> <span class="number">404</span>; <span class="comment"># 也可以改成403、502等其他错误,最好与下面的返回一致</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="attribute">if</span> ( <span class="variable">$request_uri</span> <span class="regexp">~ /xxxxxxxx/([^/]+)/(.*)</span> )&#123; <span class="comment"># 将xxxxxxxx修改为你路径前缀</span></span><br><span class="line">            <span class="attribute">set</span>  <span class="variable">$_host</span> <span class="variable">$1</span>; <span class="comment"># 获取路径后的目标网站的域名</span></span><br><span class="line">            <span class="attribute">set</span>  <span class="variable">$_uri</span> <span class="variable">$2</span>; <span class="comment"># 获取目标网站的请求地址</span></span><br><span class="line">         &#125;</span><br><span class="line">        <span class="attribute">proxy_pass</span> <span class="variable">$scheme</span>://<span class="variable">$_host</span>/<span class="variable">$_uri</span>;</span><br><span class="line">        <span class="attribute">proxy_redirect</span> https://yourdomain.com/xxxxxxxx/ /;  <span class="comment"># 修改为你的域名和路径前缀</span></span><br><span class="line">        <span class="attribute">proxy_buffer_size</span> <span class="number">32k</span>;</span><br><span class="line">        <span class="attribute">proxy_buffers</span> <span class="number">64</span> <span class="number">32k</span>;</span><br><span class="line">        <span class="attribute">proxy_busy_buffers_size</span> <span class="number">1m</span>;</span><br><span class="line">        <span class="attribute">proxy_temp_file_write_size</span> <span class="number">512k</span>;</span><br><span class="line">        <span class="attribute">proxy_max_temp_file_size</span> <span class="number">128m</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$_host</span>;</span><br><span class="line">        <span class="attribute">proxy_ssl_server_name</span> <span class="literal">on</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="section">location</span> / &#123;  <span class="comment"># 其他访问全部拒绝，规避GFW的钓鱼试探</span></span><br><span class="line">       <span class="attribute">resolver</span> <span class="number">1.1.1.1</span>;</span><br><span class="line">       <span class="attribute">return</span> <span class="number">404</span>; <span class="comment"># 也可以改成403、502等其他错误，最好与上面的密码错误返回一致，或者返回一个伪装网站</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>示例</p><p><a href="https://github.com/docmirror/dev-sidecar-doc/blob/main/ow.md">原理说明</a>（有兴趣也可以看一下）</p><p>7.开启增强模式后在增强模式设置处进行设置</p><p>域名：你指向这个网站的域名<br />端口：如果你未作修改请填443（https默认端口）<br />路径：你设置的路径（就是“xxxxxx&quot;)<br />注意：设置配置文件时的路径请保持一致<br />密码：你设置的密码，没有就空出</p><p>8.测试</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;注意&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#注意&quot;&gt;&lt;/a&gt; 注意&lt;/h2&gt;
&lt;p&gt;本项目在gitee上已被封禁，作者已停止维护&lt;/p&gt;
&lt;h2 id=&quot;前言&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href</summary>
      
    
    
    
    <category term="tech" scheme="https://nyaku.moe/categories/tech/"/>
    
    
    <category term="技术" scheme="https://nyaku.moe/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>从今天开始看魔女之旅小说</title>
    <link href="https://nyaku.moe/2021/03/13/%E4%BB%8E%E4%BB%8A%E5%A4%A9%E5%BC%80%E5%A7%8B%E7%9C%8B%E9%AD%94%E5%A5%B3%E4%B9%8B%E6%97%85%E5%B0%8F%E8%AF%B4/"/>
    <id>https://nyaku.moe/2021/03/13/%E4%BB%8E%E4%BB%8A%E5%A4%A9%E5%BC%80%E5%A7%8B%E7%9C%8B%E9%AD%94%E5%A5%B3%E4%B9%8B%E6%97%85%E5%B0%8F%E8%AF%B4/</id>
    <published>2021-03-13T09:38:01.000Z</published>
    <updated>2026-02-09T06:58:56.683Z</updated>
    
    <content type="html"><![CDATA[<p>今天一定要开始看，没错，一定</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;今天一定要开始看，没错，一定&lt;/p&gt;
</summary>
      
    
    
    
    <category term="talk" scheme="https://nyaku.moe/categories/talk/"/>
    
    
  </entry>
  
  <entry>
    <title>拥有一个自己的新建标签页</title>
    <link href="https://nyaku.moe/2021/02/18/%E6%8B%A5%E6%9C%89%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%96%B0%E6%A0%87%E7%AD%BE%E9%A1%B5/"/>
    <id>https://nyaku.moe/2021/02/18/%E6%8B%A5%E6%9C%89%E4%B8%80%E4%B8%AA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%96%B0%E6%A0%87%E7%AD%BE%E9%A1%B5/</id>
    <published>2021-02-18T07:39:52.000Z</published>
    <updated>2026-02-09T07:02:38.339Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a class="markdownIt-Anchor" href="#前言"></a> 前言</h1><p><s>搞新标签页纯属好玩（手动狗头）</s><br />如果你也和我一样觉得各大浏览器的默认新标签页功能不够完善，不够美观，<br />Infinity 等一众新标签页又不好看（纯属个人感受）那么请继续往下读</p><h1 id="开始"><a class="markdownIt-Anchor" href="#开始"></a> 开始</h1><h2 id="项目"><a class="markdownIt-Anchor" href="#项目"></a> 项目</h2><p>这是一个GitHub项目<a href="https://github.com/5iux/sou">5IUX搜索</a></p><h2 id="准备工作"><a class="markdownIt-Anchor" href="#准备工作"></a> 准备工作</h2><p>一台服务器(安装了nginx或Apache，安装了php(最好7.2以上，作者本人没有注明php版本）)<br />或者php虚拟主机</p><h2 id="步骤"><a class="markdownIt-Anchor" href="#步骤"></a> 步骤</h2><h3 id="在项目github页面下载zip并上传至服务器"><a class="markdownIt-Anchor" href="#在项目github页面下载zip并上传至服务器"></a> 在项目GitHub页面下载zip并上传至服务器</h3><p><img src="https://cdn.jsdelivr.net/gh/imouup/pic/pic/2021-02-18115109.jpg" alt="pic1" /></p><h3 id="将域名指向服务器"><a class="markdownIt-Anchor" href="#将域名指向服务器"></a> 将域名指向服务器</h3><p><img src="https://cdn.jsdelivr.net/gh/imouup/pic/pic/2021-02-18114824.jpg" alt="pic2" /></p><h3 id="配置网站信息"><a class="markdownIt-Anchor" href="#配置网站信息"></a> 配置网站信息</h3><p><img src="https://cdn.jsdelivr.net/gh/imouup/pic/pic/202102-18114933.jpg" alt="pic3" /></p><h3 id="进一步修改"><a class="markdownIt-Anchor" href="#进一步修改"></a> 进一步修改</h3><p>打开网站根目录中的index.php文件，对其中的背景图，logo，浏览器上方小图等进行修改<br />使用new tab redirect插件重定向新建标签页到你的新标签页地址，修改浏览器启动页和首页为你的新标签页地址<br />！！！注意请不要删除原作者在源码中的版权声明信息</p><h3 id="增强功能"><a class="markdownIt-Anchor" href="#增强功能"></a> 增强功能</h3><h4 id="添加天气组件"><a class="markdownIt-Anchor" href="#添加天气组件"></a> 添加天气组件</h4><p>前往<a href="https://dev.qweather.com/widget/">这里</a>创建一个天气小组件<br />复制代码，粘贴到原来代码中天气小组件的位置<br />这是原来的，请换掉它</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--天气--&gt;</span><br><span class="line">    &lt;div class=&quot;mywth&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;wea_hover&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;wea_in wea_top&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;wea_in wea_con&quot;&gt;</span><br><span class="line">                &lt;ul&gt;&lt;/ul&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;wea_in wea_foot&quot;&gt;</span><br><span class="line">                &lt;ul&gt;&lt;/ul&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;!--天气插件，基于和风天气接口制作--&gt;</span><br></pre></td></tr></table></figure><p>示例</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--天气--&gt;</span><br><span class="line">&lt;div id=&quot;he-plugin-simple&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">WIDGET = &#123;</span><br><span class="line">  CONFIG: &#123;</span><br><span class="line">    &quot;modules&quot;: &quot;01234&quot;,</span><br><span class="line">    &quot;background&quot;: 5,</span><br><span class="line">    &quot;tmpColor&quot;: &quot;4A4A4A&quot;,</span><br><span class="line">    &quot;tmpSize&quot;: 16,</span><br><span class="line">    &quot;cityColor&quot;: &quot;4A4A4A&quot;,</span><br><span class="line">    &quot;citySize&quot;: 16,</span><br><span class="line">    &quot;aqiSize&quot;: 16,</span><br><span class="line">    &quot;weatherIconSize&quot;: 24,</span><br><span class="line">    &quot;alertIconSize&quot;: 18,</span><br><span class="line">    &quot;padding&quot;: &quot;10px 10px 10px 10px&quot;,</span><br><span class="line">    &quot;shadow&quot;: &quot;1&quot;,</span><br><span class="line">    &quot;language&quot;: &quot;auto&quot;,</span><br><span class="line">    &quot;borderRadius&quot;: 5,</span><br><span class="line">    &quot;fixed&quot;: &quot;false&quot;,</span><br><span class="line">    &quot;vertical&quot;: &quot;top&quot;,</span><br><span class="line">    &quot;horizontal&quot;: &quot;left&quot;,</span><br><span class="line">    &quot;key&quot;: &quot;79cc52c3ec5d43139555dc8a4b63b17f&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;!--天气插件，基于和风天气接口制作--&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;mouup&lt;/h1&gt;</span><br></pre></td></tr></table></figure><h2 id="你可能需要用到的东西"><a class="markdownIt-Anchor" href="#你可能需要用到的东西"></a> 你可能需要用到的东西</h2><p><a href="https://chrome.google.com/webstore/detail/new-tab-redirect/icpgjfneehieebagbmdbhnlpiopdcmna?hl=zh">new tab redirect谷歌网上商店地址</a><br />什么？你用edge？<br /><a href="https://microsoftedge.microsoft.com/addons/detail/new-tab-redirect/lcmffmdoeceoffjbihahaabfojodjmkf?hl=zh-CN">edge用户看这里</a><br />你打不开第一个网址？<br /><a href="https://iamswlx-my.sharepoint.com/:u:/g/personal/iamswlx_iamswlx_onmicrosoft_com/ESbubKtwTJlLmllihGbzH6UBxIPJAT0q_5zvZZYitcLJeA?e=f05s56">New Tab Redirect的OneDrive分享地址</a><br />怎么导入扩展程序应该不用我教了吧</p><h1 id="demo"><a class="markdownIt-Anchor" href="#demo"></a> demo</h1><p><a href="https://new.mouup.top">我的新标签页</a>  （已弃用）<br />如果你喜欢也可以直接用我的</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#前言&quot;&gt;&lt;/a&gt; 前言&lt;/h1&gt;
&lt;p&gt;&lt;s&gt;搞新标签页纯属好玩（手动狗头）&lt;/s&gt;&lt;br /&gt;
如果你也和我一样觉得各大浏览器的默认新标签页功能不够完善，不够美观，&lt;br /&gt;
In</summary>
      
    
    
    
    <category term="tech" scheme="https://nyaku.moe/categories/tech/"/>
    
    
  </entry>
  
  <entry>
    <title>Onedrive桌面版登录白屏解决方案</title>
    <link href="https://nyaku.moe/2021/01/31/Onedrive%E6%A1%8C%E9%9D%A2%E7%89%88%E7%99%BB%E5%BD%95%E7%99%BD%E5%B1%8F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <id>https://nyaku.moe/2021/01/31/Onedrive%E6%A1%8C%E9%9D%A2%E7%89%88%E7%99%BB%E5%BD%95%E7%99%BD%E5%B1%8F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</id>
    <published>2021-01-31T08:47:35.000Z</published>
    <updated>2026-02-09T07:02:01.872Z</updated>
    
    <content type="html"><![CDATA[<h3 id="如果你现在遇到了下图所示的问题恭喜你这篇简短的文章可能可以帮到你"><a class="markdownIt-Anchor" href="#如果你现在遇到了下图所示的问题恭喜你这篇简短的文章可能可以帮到你"></a> 如果你现在遇到了下图所示的问题，恭喜你，这篇简短的文章可能可以帮到你</h3><p><img src="https://filestore.community.support.microsoft.com/api/images/128ee1e5-a82f-49ed-9caf-8449206ac160?upload=true" alt="我是下图" /><br /><a href="https://answers.microsoft.com/zh-hans/windows/forum/apps_windows_10-winapps-appscat_tools/onedrive%E5%8D%A1%E7%99%BD%E5%B1%8F%E8%AF%B7/d1625b20-4a70-4e68-b556-0898792a2632">微软社区的方法</a>  亲测无效！无效！</p><h3 id="下面是本文的方法"><a class="markdownIt-Anchor" href="#下面是本文的方法"></a> 下面是本文的方法</h3><p>打开host文件，在最后另起一行粘贴以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">40.126.52.147 login.microsoftonline.com</span><br></pre></td></tr></table></figure><p>感兴趣朋友可以继续往下看<br />通过在网页登录OneDrive，可以得知OneDrive（office）<a href="http://xn--login-dq1hh94cxd922fet8c2ca.microsoftonline.com">的登录地址为login.microsoftonline.com</a><br /><img src="https://cdn.jsdelivr.net/gh/imouup/pic/pic/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-31%20170942.jpg"/><br />——————————————————————我是分界线——————————————————————————————<br />然后Ping这个地址<br />找到最快的ip<br /><img src="https://cdn.jsdelivr.net/gh/imouup/pic/pic/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-01-31%20171238.jpg"/><br />然后写入host</p><p>有耐心的朋友可能会发现，如果白屏等了很久后，会看见微软的加载条  由此可知，白屏的原因是加载过慢<br />希望本文能帮到你</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;如果你现在遇到了下图所示的问题恭喜你这篇简短的文章可能可以帮到你&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#如果你现在遇到了下图所示的问题恭喜你这篇简短的文章可能可以帮到你&quot;&gt;&lt;/a&gt; 如果你现在遇到了下图所示的问题，恭喜你，这篇简</summary>
      
    
    
    
    <category term="tech" scheme="https://nyaku.moe/categories/tech/"/>
    
    
    <category term="技术" scheme="https://nyaku.moe/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>视频嵌入测试</title>
    <link href="https://nyaku.moe/2021/01/27/%E8%A7%86%E9%A2%91%E5%B5%8C%E5%85%A5%E6%B5%8B%E8%AF%95/"/>
    <id>https://nyaku.moe/2021/01/27/%E8%A7%86%E9%A2%91%E5%B5%8C%E5%85%A5%E6%B5%8B%E8%AF%95/</id>
    <published>2021-01-27T07:39:07.000Z</published>
    <updated>2026-02-09T07:02:35.412Z</updated>
    
    <content type="html"><![CDATA[<iframe src="//player.bilibili.com/player.html?aid=52012946&bvid=BV1z4411Y7tX&cid=91055960&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="700" height="500"> </iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;iframe src=&quot;//player.bilibili.com/player.html?aid=52012946&amp;bvid=BV1z4411Y7tX&amp;cid=91055960&amp;page=1&quot; scrolling=&quot;no&quot; border=&quot;0&quot; frameborder=&quot;no</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>hello，world</title>
    <link href="https://nyaku.moe/2021/01/23/hello-world/"/>
    <id>https://nyaku.moe/2021/01/23/hello-world/</id>
    <published>2021-01-23T06:56:27.000Z</published>
    <updated>2026-02-09T07:01:35.171Z</updated>
    
    <content type="html"><![CDATA[<p>在建站不知道多少个星期后，我终于打下了这篇hello world</p><p>这是一个属于一个名叫izNyaku的人的博客</p><p>这已经是。。不知道第几次重新编辑这个md文档了<br />这一年里，换过WordPress ， halo(是这样拼的吗) ，<br />最后还是回到了hexo  <s>因为没钱了</s></p><p>「嗯哼」</p><p>总之就从这篇hello,world开始<br />重新开始把</p><p>其实之前我跑去用其他cms也是有原因的<br />这个主题搬到hexo后。。怎么说，<s>太丑了</s>不怎么精致<br />所以你现在看到的是我做了点小修改的theme（指到处复制别人写好的东西）<br />我决定将其命名为</p><p>「SakuHa」</p><p>最后，我必须感谢制作出Sakura主题的<a href="https://2heng.xin/">Mashiro</a>大佬和移植主题到hexo的<a href="https://github.com/honjun">honjun</a>大佬</p><p>以上是Hello world<br />以下是新的开始</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;在建站不知道多少个星期后，我终于打下了这篇hello world&lt;/p&gt;
&lt;p&gt;这是一个属于一个名叫izNyaku的人的博客&lt;/p&gt;
&lt;p&gt;这已经是。。不知道第几次重新编辑这个md文档了&lt;br /&gt;
这一年里，换过WordPress ， halo(是这样拼的吗) ，&lt;br </summary>
      
    
    
    
    
  </entry>
  
</feed>
